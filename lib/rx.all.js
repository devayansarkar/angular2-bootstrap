(function(t){function e(t){for(var e=[],n=0,r=t.length;r>n;n++)e.push(t[n]);return e}function n(t,e){if(Le&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(Ie)){for(var n=[],o=e;o;o=o.source)o.stack&&n.unshift(o.stack);n.unshift(t.stack);var i=n.join("\n"+Ie+"\n");t.stack=r(i)}}function r(t){for(var e=t.split("\n"),n=[],r=0,s=e.length;s>r;r++){var u=e[r];o(u)||i(u)||!u||n.push(u)}return n.join("\n")}function o(t){var e=c(t);if(!e)return!1;var n=e[0],r=e[1];return n===Ve&&r>=Fe&&No>=r}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(){if(Le)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=c(n);if(!r)return;return Ve=r[0],r[1]}}function c(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function a(t){var e=[];if(!Nn(t))return e;Cn.nonEnumArgs&&t.length&&Sn(t)&&(t=_n.call(t));var n=Cn.enumPrototypes&&"function"==typeof t,r=Cn.enumErrorProps&&(t===wn||t instanceof Error);for(var o in t)n&&"prototype"==o||r&&("message"==o||"name"==o)||e.push(o);if(Cn.nonEnumShadows&&t!==yn){var i=t.constructor,s=-1,u=rn;if(t===(i&&i.prototype))var c=t===gn?dn:t===wn?an:vn.call(t),a=xn[c];for(;++s<u;)o=nn[s],a&&a[o]||!bn.call(t,o)||e.push(o)}return e}function h(t,e,n){for(var r=-1,o=n(t),i=o.length;++r<i;){var s=o[r];if(e(t[s],s,t)===!1)break}return t}function f(t,e){return h(t,e,a)}function l(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function p(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var o=typeof t,i=typeof e;if(t===t&&(null==t||null==e||"function"!=o&&"object"!=o&&"function"!=i&&"object"!=i))return!1;var s=vn.call(t),u=vn.call(e);if(s==on&&(s=ln),u==on&&(u=ln),s!=u)return!1;switch(s){case un:case cn:return+t==+e;case fn:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case pn:case dn:return t==String(e)}var c=s==sn;if(!c){if(s!=ln||!Cn.nodeClass&&(l(t)||l(e)))return!1;var a=!Cn.argsObject&&Sn(t)?Object:t.constructor,h=!Cn.argsObject&&Sn(e)?Object:e.constructor;if(!(a==h||bn.call(t,"constructor")&&bn.call(e,"constructor")||ze(a)&&a instanceof a&&ze(h)&&h instanceof h||!("constructor"in t&&"constructor"in e)))return!1}n||(n=[]),r||(r=[]);for(var d=n.length;d--;)if(n[d]==t)return r[d]==e;var v=0,b=!0;if(n.push(t),r.push(e),c){if(d=t.length,v=e.length,b=v==d)for(;v--;){var m=e[v];if(!(b=p(t[v],m,n,r)))break}}else f(e,function(e,o,i){return bn.call(i,o)?(v++,b=bn.call(t,o)&&p(t[o],e,n,r)):void 0}),b&&f(t,function(t,e,n){return bn.call(n,e)?b=--v>-1:void 0});return n.pop(),r.pop(),b}function d(t,e){for(var n=new Array(t),r=0;t>r;r++)n[r]=e();return n}function v(){try{return An.apply(this,arguments)}catch(t){return qn.e=t,qn}}function b(t){if(!ze(t))throw new TypeError("fn must be a function");return An=t,v}function m(t){throw t}function w(t,e){this.id=t,this.value=e}function y(t,e){this.scheduler=t,this.disposable=e,this.isDisposed=!1}function g(t,e){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())}function E(t){this.observer=t,this.a=[],this.isStopped=!1}function x(){this._s=s}function C(){this._s=s,this._l=s.length,this._i=0}function N(t){this._a=t}function S(t){this._a=t,this._l=O(t),this._i=0}function A(t){return"number"==typeof t&&xe.isFinite(t)}function D(e){var n,r=e[Ke];if(!r&&"string"==typeof e)return n=new x(e),n[Ke]();if(!r&&e.length!==t)return n=new N(e),n[Ke]();if(!r)throw new TypeError("Object is not iterable");return e[Ke]()}function _(t){var e=+t;return 0===e?e:isNaN(e)?e:0>e?-1:1}function O(t){var e=+t.length;return isNaN(e)?0:0!==e&&A(e)?(e=_(e)*Math.floor(Math.abs(e)),0>=e?0:e>_r?_r:e):e}function k(t,e){this.observer=t,this.parent=e}function W(t,e){return Oe(t)||(t=Xn),new kr(e,t)}function q(t,e){return new wo(function(n){var r=new In,o=new Bn;return o.setDisposable(r),r.setDisposable(t.subscribe(function(t){n.onNext(t)},function(t){try{var r=e(t)}catch(i){return n.onError(i)}Te(r)&&(r=xr(r));var s=new In;o.setDisposable(s),s.setDisposable(r.subscribe(n))},function(t){n.onCompleted(t)})),o},t)}function R(t,e){var n=this;return new wo(function(r){var o=0,i=t.length;return n.subscribe(function(n){if(i>o){var s,u=t[o++];try{s=e(n,u)}catch(c){return r.onError(c)}r.onNext(s)}else r.onCompleted()},function(t){r.onError(t)},function(){r.onCompleted()})},n)}function j(){return!1}function T(){return[]}function P(t,e,n){var r=en(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return Te(o)&&(o=xr(o)),(Ze(o)||Ye(o))&&(o=Or(o)),o}).concatAll()}function z(t,e,n){for(var r=0,o=t.length;o>r;r++)if(n(t[r],e))return r;return-1}function L(t){this.comparer=t,this.set=[]}function M(t,e,n){this.observer=t,this.selector=e,this.source=n,this.i=0,this.isStopped=!1}function V(t,e,n){var r=en(e,n,3);return t.map(function(e,n){var o=r(e,n,t);return Te(o)&&(o=xr(o)),(Ze(o)||Ye(o))&&(o=Or(o)),o}).mergeAll()}function F(t,e,n){this.observer=t,this.predicate=e,this.source=n,this.i=0,this.isStopped=!1}function I(t,e,n){return new wo(function(r){var o=!1,i=null,s=[];return t.subscribe(function(t){var u,c;try{c=e(t)}catch(a){return void r.onError(a)}if(u=0,o)try{u=n(c,i)}catch(h){return void r.onError(h)}else o=!0,i=c;u>0&&(i=c,s=[]),u>=0&&s.push(t)},function(t){r.onError(t)},function(){r.onNext(s),r.onCompleted()})},t)}function B(t){if(0===t.length)throw new Be;return t[0]}function U(t,e,n,r){if(0>e)throw new Qe;return new wo(function(o){var i=e;return t.subscribe(function(t){0===i--&&(o.onNext(t),o.onCompleted())},function(t){o.onError(t)},function(){n?(o.onNext(r),o.onCompleted()):o.onError(new Qe)})},t)}function Q(t,e,n){return new wo(function(r){var o=n,i=!1;return t.subscribe(function(t){i?r.onError(new Error("Sequence contains more than one element")):(o=t,i=!0)},function(t){r.onError(t)},function(){i||e?(r.onNext(o),r.onCompleted()):r.onError(new Be)})},t)}function $(t,e,n){return new wo(function(r){return t.subscribe(function(t){r.onNext(t),r.onCompleted()},function(t){r.onError(t)},function(){e?(r.onNext(n),r.onCompleted()):r.onError(new Be)})},t)}function H(t,e,n){return new wo(function(r){var o=n,i=!1;return t.subscribe(function(t){o=t,i=!0},function(t){r.onError(t)},function(){i||e?(r.onNext(o),r.onCompleted()):r.onError(new Be)})},t)}function J(e,n,r,o){var i=en(n,r,3);return new wo(function(n){var r=0;return e.subscribe(function(t){var s;try{s=i(t,r,e)}catch(u){return void n.onError(u)}s?(n.onNext(o?r:t),n.onCompleted()):r++},function(t){n.onError(t)},function(){n.onNext(o?-1:t),n.onCompleted()})},e)}function G(t,e){return Array.isArray(t)?K.call(e,t):te(t)?Xr(t.call(e)):ee(t)?Xr(t):Z(t)?X(t):Te(t)?Y(t):typeof t===Gr?t:Nn(t)||Array.isArray(t)?K.call(e,t):t}function K(t){var e=this;return function(n){function r(t,r){if(!o)try{if(t=G(t,e),typeof t!==Gr)return u[r]=t,--s||n(null,u);t.call(e,function(t,e){if(!o){if(t)return o=!0,n(t);u[r]=e,--s||n(null,u)}})}catch(i){o=!0,n(i)}}var o,i=Object.keys(t),s=i.length,u=new t.constructor;if(!s)return void nr.schedule(function(){n(null,u)});for(var c=0,a=i.length;a>c;c++)r(t[i[c]],i[c])}}function X(t){return function(e){var n,r=!1;t.subscribe(function(t){n=t,r=!0},e,function(){r&&e(null,n)})}}function Y(t){return function(e){t.then(function(t){e(null,t)},e)}}function Z(t){return t&&typeof t.subscribe===Gr}function te(t){return t&&t.constructor&&"GeneratorFunction"===t.constructor.name}function ee(t){return t&&typeof t.next===Gr&&typeof t[Kr]===Gr}function ne(t){t&&nr.schedule(function(){throw t})}function re(t,e,n){if(t.addEventListener)return t.addEventListener(e,n,!1),Ln(function(){t.removeEventListener(e,n,!1)});throw new Error("No listener found")}function oe(t,e,n){var r=new Tn;if("[object NodeList]"===Object.prototype.toString.call(t))for(var o=0,i=t.length;i>o;o++)r.add(oe(t.item(o),e,n));else t&&r.add(re(t,e,n));return r}function ie(t,e,n){return new wo(function(r){function o(t,e){a[e]=t;var o;if(s[e]=!0,u||(u=s.every(ke))){if(i)return void r.onError(i);try{o=n.apply(null,a)}catch(h){return void r.onError(h)}r.onNext(o)}c&&a[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,c=!1,a=new Array(2);return new Tn(t.subscribe(function(t){o(t,0)},function(t){a[1]?r.onError(t):i=t},function(){c=!0,a[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){c=!0,o(!0,1)}))},t)}function se(t,e){return t.groupJoin(this,e,Sr,function(t,e){return e})}function ue(t){var e=this;return new wo(function(n){var r=new Eo,o=new Tn,i=new Un(o);return n.onNext(Wn(r,i)),o.add(e.subscribe(function(t){r.onNext(t)},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),Te(t)&&(t=xr(t)),o.add(t.subscribe(function(){r.onCompleted(),r=new Eo,n.onNext(Wn(r,i))},function(t){r.onError(t),n.onError(t)},function(){r.onCompleted(),n.onCompleted()})),i},e)}function ce(t){var e=this;return new wo(function(n){function r(){var e;try{e=t()}catch(i){return void n.onError(i)}Te(e)&&(e=xr(e));var c=new In;o.setDisposable(c),c.setDisposable(e.take(1).subscribe(_e,function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),u=new Eo,n.onNext(Wn(u,s)),r()}))}var o=new Bn,i=new Tn(o),s=new Un(i),u=new Eo;return n.onNext(Wn(u,s)),i.add(e.subscribe(function(t){u.onNext(t)},function(t){u.onError(t),n.onError(t)},function(){u.onCompleted(),n.onCompleted()})),r(),s},e)}function ae(e,n){return new ar(function(){return new cr(function(){return e()?{done:!1,value:n}:{done:!0,value:t}})})}function he(t){this.patterns=t}function fe(t,e){this.expression=t,this.selector=e}function le(t,e,n){var r=t.get(e);if(!r){var o=new vo(e,n);return t.set(e,o),o}return r}function pe(t,e,n){this.joinObserverArray=t,this.onNext=e,this.onCompleted=n,this.joinObservers=new po;for(var r=0,o=this.joinObserverArray.length;o>r;r++){var i=this.joinObserverArray[r];this.joinObservers.set(i,i)}}function de(t,e){return new wo(function(n){return e.scheduleWithAbsolute(t,function(){n.onNext(0),n.onCompleted()})})}function ve(t,e,n){return new wo(function(r){var o=t,i=Hn(e);return n.scheduleRecursiveWithAbsoluteAndState(0,o,function(t,e){if(i>0){var s=n.now();o+=i,s>=o&&(o=s+i)}r.onNext(t),e(t+1,o)})})}function be(t,e){return new wo(function(n){return e.scheduleWithRelative(Hn(t),function(){n.onNext(0),n.onCompleted()})})}function me(t,e,n){return t===e?new wo(function(t){return n.schedulePeriodicWithState(0,e,function(e){return t.onNext(e),e+1})}):Nr(function(){return ve(n.now()+t,e,n)})}function we(t,e,n){return new wo(function(r){var o,i=!1,s=new Bn,u=null,c=[],a=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,h;"E"===t.value.kind?(c=[],c.push(t),u=t.value.exception,h=!a):(c.push({value:t.value,timestamp:t.timestamp+e}),h=!i,i=!0),h&&(null!==u?r.onError(u):(o=new In,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveWithRelative(e,function(t){var e,o,s,h;if(null===u){a=!0;do s=null,c.length>0&&c[0].timestamp-n.now()<=0&&(s=c.shift().value),null!==s&&s.accept(r);while(null!==s);h=!1,o=0,c.length>0?(h=!0,o=Math.max(0,c[0].timestamp-n.now())):i=!1,e=u,a=!1,null!==e?r.onError(e):h&&t(o)}}))))}),new Tn(o,s)},t)}function ye(t,e,n){return Nr(function(){return we(t,e-n.now(),n)})}function ge(t,e){return new wo(function(n){function r(){s&&(s=!1,n.onNext(i)),o&&n.onCompleted()}var o,i,s;return new Tn(t.subscribe(function(t){s=!0,i=t},n.onError.bind(n),function(){o=!0}),e.subscribe(r,n.onError.bind(n),r))},t)}var Ee={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},xe=Ee[typeof window]&&window||this,Ce=Ee[typeof exports]&&exports&&!exports.nodeType&&exports,Ne=Ee[typeof module]&&module&&!module.nodeType&&module,Se=Ne&&Ne.exports===Ce&&Ce,Ae=Ee[typeof global]&&global;!Ae||Ae.global!==Ae&&Ae.window!==Ae||(xe=Ae);var De={internals:{},config:{Promise:xe.Promise},helpers:{}},_e=De.helpers.noop=function(){},Oe=(De.helpers.notDefined=function(t){return"undefined"==typeof t},De.helpers.isScheduler=function(t){return t instanceof De.Scheduler}),ke=De.helpers.identity=function(t){return t},We=(De.helpers.pluck=function(t){return function(e){return e[t]}},De.helpers.just=function(t){return function(){return t}},De.helpers.defaultNow=Date.now),qe=De.helpers.defaultComparer=function(t,e){return Dn(t,e)},Re=De.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0},je=(De.helpers.defaultKeySerializer=function(t){return t.toString()},De.helpers.defaultError=function(t){throw t}),Te=De.helpers.isPromise=function(t){return!!t&&"function"==typeof t.then},Pe=(De.helpers.asArray=function(){return Array.prototype.slice.call(arguments)},De.helpers.not=function(t){return!t}),ze=De.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==vn.call(t)}),t}();De.config.longStackSupport=!1;var Le=!1;try{throw new Error}catch(Me){Le=!!Me.stack}var Ve,Fe=u(),Ie="From previous event:",Be=De.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};Be.prototype=Error.prototype;var Ue=De.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};Ue.prototype=Error.prototype;var Qe=De.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};Qe.prototype=Error.prototype;var $e=De.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};$e.prototype=Error.prototype;var He=De.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};He.prototype=Error.prototype;var Je=De.helpers.notImplemented=function(){throw new He},Ge=De.helpers.notSupported=function(){throw new $e},Ke="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";xe.Set&&"function"==typeof(new xe.Set)["@@iterator"]&&(Ke="@@iterator");var Xe=De.doneEnumerator={done:!0,value:t},Ye=De.helpers.isIterable=function(e){return e[Ke]!==t},Ze=De.helpers.isArrayLike=function(e){return e&&e.length!==t};De.helpers.iterator=Ke;var tn,en=De.internals.bindCallback=function(t,e,n){if("undefined"==typeof e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},nn=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],rn=nn.length,on="[object Arguments]",sn="[object Array]",un="[object Boolean]",cn="[object Date]",an="[object Error]",hn="[object Function]",fn="[object Number]",ln="[object Object]",pn="[object RegExp]",dn="[object String]",vn=Object.prototype.toString,bn=Object.prototype.hasOwnProperty,mn=vn.call(arguments)==on,wn=Error.prototype,yn=Object.prototype,gn=String.prototype,En=yn.propertyIsEnumerable;try{tn=!(vn.call(document)==ln&&!({toString:0}+""))}catch(Me){tn=!0}var xn={};xn[sn]=xn[cn]=xn[fn]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},xn[un]=xn[dn]={constructor:!0,toString:!0,valueOf:!0},xn[an]=xn[hn]=xn[pn]={constructor:!0,toString:!0},xn[ln]={constructor:!0};var Cn={};!function(){var t=function(){this.x=1},e=[];t.prototype={valueOf:1,y:1};for(var n in new t)e.push(n);for(n in arguments);Cn.enumErrorProps=En.call(wn,"message")||En.call(wn,"name"),Cn.enumPrototypes=En.call(t,"prototype"),Cn.nonEnumArgs=0!=n,Cn.nonEnumShadows=!/valueOf/.test(e)}(1);var Nn=De.internals.isObject=function(t){var e=typeof t;return t&&("function"==e||"object"==e)||!1},Sn=function(t){return t&&"object"==typeof t?vn.call(t)==on:!1};mn||(Sn=function(t){return t&&"object"==typeof t?bn.call(t,"callee"):!1});var An,Dn=De.internals.isEqual=function(t,e){return p(t,e,[],[])},_n=({}.hasOwnProperty,Array.prototype.slice),On=this.inherits=De.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n},kn=De.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;r>n;n++)e.push(arguments[n]);for(var o=0,i=e.length;i>o;o++){var s=e[o];for(var u in s)t[u]=s[u]}},Wn=De.internals.addRef=function(t,e){return new wo(function(n){return new Tn(e.getDisposable(),t.subscribe(n))})},qn={e:{}};w.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Rn=De.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},jn=Rn.prototype;jn.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},jn.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},jn.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var o=this.items[t];this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)}}},jn.peek=function(){return this.items[0].value},jn.removeAt=function(e){this.items[e]=this.items[--this.length],this.items[this.length]=t,this.heapify()},jn.dequeue=function(){var t=this.peek();return this.removeAt(0),t},jn.enqueue=function(t){var e=this.length++;this.items[e]=new w(Rn.count++,t),this.percolate(e)},jn.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Rn.count=0;var Tn=De.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0],e=n.length;else for(e=arguments.length,n=new Array(e),t=0;e>t;t++)n[t]=arguments[t];for(t=0;e>t;t++)if(!Vn(n[t]))throw new TypeError("Not a disposable");this.disposables=n,this.isDisposed=!1,this.length=n.length},Pn=Tn.prototype;Pn.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},Pn.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},Pn.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;t>n;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;t>n;n++)e[n].dispose()}};var zn=De.Disposable=function(t){this.isDisposed=!1,this.action=t||_e};zn.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ln=zn.create=function(t){return new zn(t)},Mn=zn.empty={dispose:_e},Vn=zn.isDisposable=function(t){return t&&ze(t.dispose)},Fn=zn.checkDisposed=function(t){if(t.isDisposed)throw new Ue},In=De.SingleAssignmentDisposable=function(){function t(){this.isDisposed=!1,this.current=null}var e=t.prototype;return e.getDisposable=function(){return this.current},e.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},e.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()},t}(),Bn=De.SerialDisposable=In,Un=De.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?Mn:new t(this)},e}();y.prototype.dispose=function(){this.scheduler.scheduleWithState(this,g)};var Qn=De.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||Re,this.disposable=new In};Qn.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Qn.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},Qn.prototype.isCancelled=function(){return this.disposable.isDisposed},Qn.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var $n=De.Scheduler=function(){function t(t,e,n,r){this.now=t,this._schedule=e,this._scheduleRelative=n,this._scheduleAbsolute=r}function e(t,e){return e(),Mn}var n=t.prototype;return n.schedule=function(t){return this._schedule(t,e)},n.scheduleWithState=function(t,e){return this._schedule(t,e)},n.scheduleWithRelative=function(t,n){return this._scheduleRelative(n,t,e)},n.scheduleWithRelativeAndState=function(t,e,n){return this._scheduleRelative(t,e,n)},n.scheduleWithAbsolute=function(t,n){return this._scheduleAbsolute(n,t,e)},n.scheduleWithAbsoluteAndState=function(t,e,n){return this._scheduleAbsolute(t,e,n)},t.now=We,t.normalize=function(t){return 0>t&&(t=0),t},t}(),Hn=$n.normalize;!function(t){function e(t,e){function n(e){o(e,function(e){var r=!1,o=!1,s=t.scheduleWithState(e,function(t,e){return r?i.remove(s):o=!0,n(e),Mn});o||(i.add(s),r=!0)})}var r=e[0],o=e[1],i=new Tn;return n(r),i}function n(t,e,n){function r(e){i(e,function(e,o){var i=!1,u=!1,c=t[n](e,o,function(t,e){return i?s.remove(c):u=!0,r(e),Mn});u||(s.add(c),i=!0)})}var o=e[0],i=e[1],s=new Tn;return r(o),s}function r(t,e){t(function(n){e(t,n)})}t.scheduleRecursive=function(t){return this.scheduleRecursiveWithState(t,function(t,e){t(function(){e(t)})})},t.scheduleRecursiveWithState=function(t,n){return this.scheduleWithState([t,n],e)},t.scheduleRecursiveWithRelative=function(t,e){return this.scheduleRecursiveWithRelativeAndState(e,t,r)},t.scheduleRecursiveWithRelativeAndState=function(t,e,r){return this._scheduleRelative([t,r],e,function(t,e){return n(t,e,"scheduleWithRelativeAndState")})},t.scheduleRecursiveWithAbsolute=function(t,e){return this.scheduleRecursiveWithAbsoluteAndState(e,t,r)},t.scheduleRecursiveWithAbsoluteAndState=function(t,e,r){return this._scheduleAbsolute([t,r],e,function(t,e){return n(t,e,"scheduleWithAbsoluteAndState")})}}($n.prototype),function(){$n.prototype.schedulePeriodic=function(t,e){return this.schedulePeriodicWithState(null,t,e)},$n.prototype.schedulePeriodicWithState=function(t,e,n){if("undefined"==typeof xe.setInterval)throw new $e;e=Hn(e);var r=t,o=xe.setInterval(function(){r=n(r)},e);return Ln(function(){xe.clearInterval(o)})}}($n.prototype),function(t){t.catchError=t["catch"]=function(t){return new rr(this,t)}}($n.prototype);var Jn,Gn=De.internals.SchedulePeriodicRecursive=function(){function t(t,e){e(0,this._period);try{this._state=this._action(this._state)}catch(n){throw this._cancel.dispose(),n}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new In;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,t.bind(this))),e},e}(),Kn=$n.immediate=function(){function t(t,e){return e(this,t)}return new $n(We,t,Ge,Ge)}(),Xn=$n.currentThread=function(){function t(){for(;n.length>0;){var t=n.dequeue();!t.isCancelled()&&t.invoke()}}function e(e,r){var o=new Qn(this,e,r,this.now());if(n)n.enqueue(o);else{n=new Rn(4),n.enqueue(o);var i=b(t)();if(n=null,i===qn)return m(i.e)}return o.disposable}var n,r=new $n(We,e,Ge,Ge);return r.scheduleRequired=function(){return!n},r}(),Yn=_e,Zn=function(){var t,e=_e;if("WScript"in this)t=function(t,e){WScript.Sleep(e),t()};else{if(!xe.setTimeout)throw new $e;t=xe.setTimeout,e=xe.clearTimeout}return{setTimeout:t,clearTimeout:e}}(),tr=Zn.setTimeout,er=Zn.clearTimeout;!function(){function e(){if(!xe.postMessage||xe.importScripts)return!1;var t=!1,e=xe.onmessage;return xe.onmessage=function(){t=!0},xe.postMessage("","*"),xe.onmessage=e,t}var n=0,r=new Array(1e3),o=RegExp("^"+String(vn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),i="function"==typeof(i=Ae&&Se&&Ae.setImmediate)&&!o.test(i)&&i,s="function"==typeof(s=Ae&&Se&&Ae.clearImmediate)&&!o.test(s)&&s;if("function"==typeof i)Jn=i,Yn=s;else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))Jn=process.nextTick;else if(e()){var u="ms.rx.schedule"+Math.random(),c=function(e){if("string"==typeof e.data&&e.data.substring(0,u.length)===u){var n=e.data.substring(u.length),o=r[n];o(),r[n]=t}};xe.addEventListener?xe.addEventListener("message",c,!1):xe.attachEvent("onmessage",c,!1),Jn=function(t){var e=n++;r[e]=t,xe.postMessage(u+e,"*")}}else if(xe.MessageChannel){var a=new xe.MessageChannel;a.port1.onmessage=function(e){var n=e.data,o=r[n];o(),r[n]=t},Jn=function(t){var e=n++;r[e]=t,a.port2.postMessage(e)}}else"document"in xe&&"onreadystatechange"in xe.document.createElement("script")?Jn=function(t){var e=xe.document.createElement("script");e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},xe.document.documentElement.appendChild(e)}:(Jn=function(t){return tr(t,0)},Yn=er)}();var nr=$n.timeout=$n["default"]=function(){function t(t,e){var n=this,r=new In,o=Jn(function(){r.isDisposed||r.setDisposable(e(n,t))});return new Tn(r,Ln(function(){Yn(o)}))}function e(t,e,n){var r=this,o=$n.normalize(e);if(0===o)return r.scheduleWithState(t,n);var i=new In,s=tr(function(){i.isDisposed||i.setDisposable(n(r,t))},o);return new Tn(i,Ln(function(){er(s)}))}function n(t,e,n){return this.scheduleWithRelativeAndState(t,e-this.now(),n)}return new $n(We,t,e,n)}(),rr=function(t){function e(t,e){return this._scheduler.scheduleWithState(t,this._wrap(e))}function n(t,e,n){return this._scheduler.scheduleWithRelativeAndState(t,e,this._wrap(n))}function r(t,e,n){return this._scheduler.scheduleWithAbsoluteAndState(t,e,this._wrap(n))}function o(o,i){this._scheduler=o,this._handler=i,this._recursiveOriginal=null,this._recursiveWrapper=null,t.call(this,this._scheduler.now.bind(this._scheduler),e,n,r)}return On(o,t),o.prototype._clone=function(t){return new o(t,this._handler)},o.prototype._wrap=function(t){var e=this;return function(n,r){try{return t(e._getRecursiveWrapper(n),r)}catch(o){if(!e._handler(o))throw o;return Mn}}},o.prototype._getRecursiveWrapper=function(t){if(this._recursiveOriginal!==t){this._recursiveOriginal=t;var e=this._clone(t);e._recursiveOriginal=t,e._recursiveWrapper=e,this._recursiveWrapper=e}return this._recursiveWrapper},o.prototype.schedulePeriodicWithState=function(t,e,n){var r=this,o=!1,i=new In;return i.setDisposable(this._scheduler.schedulePeriodicWithState(t,e,function(t){if(o)return null;try{return n(t)}catch(e){if(o=!0,!r._handler(e))throw e;return i.dispose(),null}})),i},o}($n),or=De.Notification=function(){function t(t,e,n,r,o,i){this.kind=t,this.value=e,this.exception=n,this._accept=r,this._acceptObservable=o,this.toString=i}return t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObservable(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Oe(t)||(t=Kn),new wo(function(n){return t.scheduleWithState(e,function(t,e){e._acceptObservable(n),"N"===e.kind&&n.onCompleted()})})},t}(),ir=or.createOnNext=function(){function t(t){return t(this.value)}function e(t){return t.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(r){return new or("N",r,null,t,e,n)}}(),sr=or.createOnError=function(){function t(t,e){return e(this.exception)}function e(t){return t.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(r){return new or("E",null,r,t,e,n)}}(),ur=or.createOnCompleted=function(){function t(t,e,n){return n()}function e(t){return t.onCompleted()}function n(){return"OnCompleted()"}return function(){return new or("C",null,null,t,e,n)}}(),cr=De.internals.Enumerator=function(t){this._next=t};cr.prototype.next=function(){return this._next()},cr.prototype[Ke]=function(){return this};var ar=De.internals.Enumerable=function(t){this._iterator=t};ar.prototype[Ke]=function(){return this._iterator()},ar.prototype.concat=function(){var t=this;return new wo(function(e){var n,r=t[Ke](),o=new Bn,i=Kn.scheduleRecursive(function(t){if(!n){try{var i=r.next()}catch(s){return e.onError(s)}if(i.done)return e.onCompleted();var u=i.value;Te(u)&&(u=xr(u));var c=new In;o.setDisposable(c),c.setDisposable(u.subscribe(function(t){e.onNext(t)},function(t){e.onError(t)},t))}});return new Tn(o,i,Ln(function(){n=!0}))})},ar.prototype.catchError=function(){var t=this;return new wo(function(e){var n,r=t[Ke](),o=new Bn,i=Kn.scheduleRecursiveWithState(null,function(t,i){if(!n){try{var s=r.next()}catch(u){return observer.onError(u)}if(s.done)return void(null!==t?e.onError(t):e.onCompleted());var c=s.value;Te(c)&&(c=xr(c));var a=new In;o.setDisposable(a),a.setDisposable(c.subscribe(function(t){e.onNext(t)},i,function(){e.onCompleted()}))}});return new Tn(o,i,Ln(function(){n=!0}))})},ar.prototype.catchErrorWhen=function(t){var e=this;return new wo(function(n){var r,o,i=new Eo,s=new Eo,u=t(i),c=u.subscribe(s),a=e[Ke](),h=new Bn,f=Kn.scheduleRecursive(function(t){if(!r){try{var e=a.next()}catch(u){return n.onError(u)}if(e.done)return void(o?n.onError(o):n.onCompleted());var c=e.value;Te(c)&&(c=xr(c));var f=new In,l=new In;h.setDisposable(new Tn(l,f)),f.setDisposable(c.subscribe(function(t){n.onNext(t)},function(e){l.setDisposable(s.subscribe(t,function(t){n.onError(t)},function(){n.onCompleted()})),i.onNext(e)},function(){n.onCompleted()}))}});return new Tn(c,h,f,Ln(function(){r=!0}))})};var hr=ar.repeat=function(t,e){return null==e&&(e=-1),new ar(function(){var n=e;return new cr(function(){return 0===n?Xe:(n>0&&n--,{done:!1,value:t})})})},fr=ar.of=function(t,e,n){if(e)var r=en(e,n,3);return new ar(function(){var n=-1;return new cr(function(){return++n<t.length?{done:!1,value:e?r(t[n],n,t):t[n]}:Xe})})},lr=De.Observer=function(){};lr.prototype.toNotifier=function(){var t=this;return function(e){return e.accept(t)}},lr.prototype.asObserver=function(){return new br(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))},lr.prototype.checked=function(){return new mr(this)};var pr=lr.create=function(t,e,n){return t||(t=_e),e||(e=je),n||(n=_e),new br(t,e,n)};lr.fromNotifier=function(t,e){return new br(function(n){return t.call(e,ir(n))},function(n){return t.call(e,sr(n))},function(){return t.call(e,ur())})},lr.prototype.notifyOn=function(t){return new yr(t,this)},lr.prototype.makeSafe=function(t){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,t)};var dr,vr=De.internals.AbstractObserver=function(t){function e(){this.isStopped=!1,t.call(this)}return On(e,t),e.prototype.next=Je,e.prototype.error=Je,e.prototype.completed=Je,e.prototype.onNext=function(t){this.isStopped||this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},e}(lr),br=De.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return On(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(vr),mr=function(t){function e(e){t.call(this),this._observer=e,this._state=0}On(e,t);var n=e.prototype;return n.onNext=function(t){this.checkAccess();var e=b(this._observer.onNext).call(this._observer,t);this._state=0,e===qn&&m(e.e)},n.onError=function(t){this.checkAccess();var e=b(this._observer.onError).call(this._observer,t);this._state=2,e===qn&&m(e.e)},n.onCompleted=function(){this.checkAccess();var t=b(this._observer.onCompleted).call(this._observer);this._state=2,t===qn&&m(t.e)},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");
0===this._state&&(this._state=1)},e}(lr),wr=De.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Bn}return On(e,t),e.prototype.next=function(t){var e=this;this.queue.push(function(){e.observer.onNext(t)})},e.prototype.error=function(t){var e=this;this.queue.push(function(){e.observer.onError(t)})},e.prototype.completed=function(){var t=this;this.queue.push(function(){t.observer.onCompleted()})},e.prototype.ensureActive=function(){var t=!1,e=this;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(t){var n;if(!(e.queue.length>0))return void(e.isAcquired=!1);n=e.queue.shift();try{n()}catch(r){throw e.queue=[],e.hasFaulted=!0,r}t()}))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(vr),yr=function(t){function e(e,n,r){t.call(this,e,n),this._cancel=r}return On(e,t),e.prototype.next=function(e){t.prototype.next.call(this,e),this.ensureActive()},e.prototype.error=function(e){t.prototype.error.call(this,e),this.ensureActive()},e.prototype.completed=function(){t.prototype.completed.call(this),this.ensureActive()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},e}(wr),gr=De.Observable=function(){function t(t){if(De.config.longStackSupport&&Le){try{throw new Error}catch(e){this.stack=e.stack.substring(e.stack.indexOf("\n")+1)}var r=this;this._subscribe=function(e){var o=e.onError.bind(e);return e.onError=function(t){n(t,r),o(t)},t.call(r,e)}}else this._subscribe=t}return dr=t.prototype,dr.subscribe=dr.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:pr(t,e,n))},dr.subscribeOnNext=function(t,e){return this._subscribe(pr("undefined"!=typeof e?function(n){t.call(e,n)}:t))},dr.subscribeOnError=function(t,e){return this._subscribe(pr(null,"undefined"!=typeof e?function(n){t.call(e,n)}:t))},dr.subscribeOnCompleted=function(t,e){return this._subscribe(pr(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},t}(),Er=De.ObservableBase=function(t){function e(t){return t&&ze(t.dispose)?t:ze(t)?Ln(t):Mn}function n(t,n){var r=n[0],o=n[1],i=b(o.subscribeCore).call(o,r);return i!==qn||r.fail(qn.e)?void r.setDisposable(e(i)):m(qn.e)}function r(t){var e=new yo(t),r=[e,this];return Xn.scheduleRequired()?Xn.scheduleWithState(r,n):n(null,r),e}function o(){t.call(this,r)}return On(o,t),o.prototype.subscribeCore=Je,o}(gr);dr.observeOn=function(t){var e=this;return new wo(function(n){return e.subscribe(new yr(t,n))},e)},dr.subscribeOn=function(t){var e=this;return new wo(function(n){var r=new In,o=new Bn;return o.setDisposable(r),r.setDisposable(t.schedule(function(){o.setDisposable(new y(t,e.subscribe(n)))})),o},e)};var xr=gr.fromPromise=function(t){return Nr(function(){var e=new De.AsyncSubject;return t.then(function(t){e.onNext(t),e.onCompleted()},e.onError.bind(e)),e})};dr.toPromise=function(t){if(t||(t=De.config.Promise),!t)throw new $e("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r,o=!1;e.subscribe(function(t){r=t,o=!0},n,function(){o&&t(r)})})};var Cr=function(t){function e(e){this.source=e,t.call(this)}return On(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new E(t))},e}(Er);E.prototype.onNext=function(t){this.isStopped||this.a.push(t)},E.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.observer.onError(t))},E.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.observer.onNext(this.a),this.observer.onCompleted())},E.prototype.dispose=function(){this.isStopped=!0},E.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},dr.toArray=function(){return new Cr(this)},gr.create=gr.createWithDisposable=function(t,e){return new wo(t,e)};var Nr=gr.defer=function(t){return new wo(function(e){var n;try{n=t()}catch(r){return Pr(r).subscribe(e)}return Te(n)&&(n=xr(n)),n.subscribe(e)})},Sr=gr.empty=function(t){return Oe(t)||(t=Kn),new wo(function(e){return t.schedule(function(){e.onCompleted()})})},Ar=function(t){function e(e,n,r){this.iterable=e,this.mapper=n,this.scheduler=r,t.call(this)}return On(e,t),e.prototype.subscribeCore=function(t){var e=new Dr(t,this);return e.run()},e}(Er),Dr=function(){function t(t,e){this.observer=t,this.parent=e}return t.prototype.run=function(){function t(t,e){try{var i=n.next()}catch(s){return r.onError(s)}if(i.done)return r.onCompleted();var u=i.value;if(o)try{u=o(u,t)}catch(s){return r.onError(s)}r.onNext(u),e(t+1)}var e=Object(this.parent.iterable),n=D(e),r=this.observer,o=this.parent.mapper;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},t}(),_r=Math.pow(2,53)-1;x.prototype[Ke]=function(){return new C(this._s)},C.prototype[Ke]=function(){return this},C.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Xe},N.prototype[Ke]=function(){return new S(this._a)},S.prototype[Ke]=function(){return this},S.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Xe};var Or=gr.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!ze(e))throw new Error("mapFn when provided must be a function");if(e)var o=en(e,n,2);return Oe(r)||(r=Xn),new Ar(t,o,r)},kr=function(t){function e(e,n){this.args=e,this.scheduler=n,t.call(this)}return On(e,t),e.prototype.subscribeCore=function(t){var e=new k(t,this);return e.run()},e}(Er);k.prototype.run=function(){function t(t,o){r>t?(e.onNext(n[t]),o(t+1)):e.onCompleted()}var e=this.observer,n=this.parent.args,r=n.length;return this.parent.scheduler.scheduleRecursiveWithState(0,t)};var Wr=gr.fromArray=function(t,e){return Oe(e)||(e=Xn),new kr(t,e)};gr.generate=function(t,e,n,r,o){return Oe(o)||(o=Xn),new wo(function(i){var s=!0,u=t;return o.scheduleRecursive(function(t){var o,c;try{s?s=!1:u=n(u),o=e(u),o&&(c=r(u))}catch(a){return void i.onError(a)}o?(i.onNext(c),t()):i.onCompleted()})})},gr.of=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return new kr(e,Xn)},gr.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;e>r;r++)n[r-1]=arguments[r];return new kr(n,t)},gr.ofArrayChanges=function(t){if(!Array.isArray(t))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new wo(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Array.observe(t,n),function(){Array.unobserve(t,n)}})},gr.ofObjectChanges=function(t){if(null==t)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new wo(function(e){function n(t){for(var n=0,r=t.length;r>n;n++)e.onNext(t[n])}return Object.observe(t,n),function(){Object.unobserve(t,n)}})};var qr=gr.never=function(){return new wo(function(){return Mn})};gr.pairs=function(t,e){return e||(e=De.Scheduler.currentThread),new wo(function(n){var r=Object.keys(t),o=r.length;return e.scheduleRecursiveWithState(0,function(e,i){if(o>e){var s=r[e];n.onNext([s,t[s]]),i(e+1)}else n.onCompleted()})})};var Rr=function(t){function e(e,n,r){this.start=e,this.count=n,this.scheduler=r,t.call(this)}return On(e,t),e.prototype.subscribeCore=function(t){var e=new jr(t,this);return e.run()},e}(Er),jr=function(){function t(t,e){this.observer=t,this.parent=e}return t.prototype.run=function(){function t(t,o){n>t?(r.onNext(e+t),o(t+1)):r.onCompleted()}var e=this.parent.start,n=this.parent.count,r=this.observer;return this.parent.scheduler.scheduleRecursiveWithState(0,t)},t}();gr.range=function(t,e,n){return Oe(n)||(n=Xn),new Rr(t,e,n)},gr.repeat=function(t,e,n){return Oe(n)||(n=Xn),Tr(t,n).repeat(null==e?-1:e)};var Tr=gr["return"]=gr.just=function(t,e){return Oe(e)||(e=Kn),new wo(function(n){return e.schedule(function(){n.onNext(t),n.onCompleted()})})};gr.returnValue=function(){return Tr.apply(null,arguments)};var Pr=gr["throw"]=gr.throwError=function(t,e){return Oe(e)||(e=Kn),new wo(function(n){return e.schedule(function(){n.onError(t)})})};gr.throwException=function(){return gr.throwError.apply(null,arguments)},gr.using=function(t,e){return new wo(function(n){var r,o,i=Mn;try{r=t(),r&&(i=r),o=e(r)}catch(s){return new Tn(Pr(s).subscribe(n),i)}return new Tn(o.subscribe(n),i)})},dr.amb=function(t){var e=this;return new wo(function(n){function r(){i||(i=s,a.dispose())}function o(){i||(i=u,c.dispose())}var i,s="L",u="R",c=new In,a=new In;return Te(t)&&(t=xr(t)),c.setDisposable(e.subscribe(function(t){r(),i===s&&n.onNext(t)},function(t){r(),i===s&&n.onError(t)},function(){r(),i===s&&n.onCompleted()})),a.setDisposable(t.subscribe(function(t){o(),i===u&&n.onNext(t)},function(t){o(),i===u&&n.onError(t)},function(){o(),i===u&&n.onCompleted()})),new Tn(c,a)})},gr.amb=function(){function t(t,e){return t.amb(e)}var e=qr(),n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(var r=0,o=arguments.length;o>r;r++)n.push(arguments[r]);for(var r=0,o=n.length;o>r;r++)e=t(e,n[r]);return e},dr["catch"]=dr.catchError=dr.catchException=function(t){return"function"==typeof t?q(this,t):zr([this,t])};var zr=gr.catchError=gr["catch"]=gr.catchException=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return fr(t).catchError()};dr.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Lr.apply(this,e)};var Lr=gr.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=e.pop();return Array.isArray(e[0])&&(e=e[0]),new wo(function(t){function n(e){if(u[e]=!0,c||(c=u.every(ke))){try{var n=r.apply(null,h)}catch(o){return t.onError(o)}t.onNext(n)}else a.filter(function(t,n){return n!==e}).every(ke)&&t.onCompleted()}function o(e){a[e]=!0,a.every(ke)&&t.onCompleted()}for(var i=e.length,s=function(){return!1},u=d(i,s),c=!1,a=d(i,s),h=new Array(i),f=new Array(i),l=0;i>l;l++)!function(r){var i=e[r],s=new In;Te(i)&&(i=xr(i)),s.setDisposable(i.subscribe(function(t){h[r]=t,n(r)},function(e){t.onError(e)},function(){o(r)})),f[r]=s}(l);return new Tn(f)},this)};dr.concat=function(){for(var t=[],e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return t.unshift(this),Mr.apply(null,t)};var Mr=gr.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;n>e;e++)t[e]=arguments[e]}return fr(t).concat()};dr.concatAll=dr.concatObservable=function(){return this.merge(1)};var Vr=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return On(e,t),e.prototype.subscribeCore=function(t){var e=new Tn;return e.add(this.source.subscribe(new Fr(t,this.maxConcurrent,e))),e},e}(Er),Fr=function(){function t(t,e,n){this.o=t,this.max=e,this.g=n,this.done=!1,this.q=[],this.activeCount=0,this.isStopped=!1}function e(t,e){this.parent=t,this.sad=e,this.isStopped=!1}return t.prototype.handleSubscribe=function(t){var n=new In;this.g.add(n),Te(t)&&(t=xr(t)),n.setDisposable(t.subscribe(new e(this,n)))},t.prototype.onNext=function(t){this.isStopped||(this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t))},t.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,0===this.activeCount&&this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e.prototype.onNext=function(t){this.isStopped||this.parent.o.onNext(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.o.onError(t))},e.prototype.onCompleted=function(){if(!this.isStopped){this.isStopped=!0;var t=this.parent;t.g.remove(this.sad),t.q.length>0?t.handleSubscribe(t.q.shift()):(t.activeCount--,t.done&&0===t.activeCount&&t.o.onCompleted())}},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(t),!0)},t}();dr.merge=function(t){return"number"!=typeof t?Ir(this,t):new Vr(this,t)};var Ir=gr.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Oe(arguments[0]))for(t=arguments[0],e=1;r>e;e++)n.push(arguments[e]);else for(t=Kn,e=0;r>e;e++)n.push(arguments[e]);else for(t=Kn,e=1;r>e;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),W(t,n).mergeAll()},Br=function(t){function e(e){this.source=e,t.call(this)}return On(e,t),e.prototype.subscribeCore=function(t){var e=new Tn,n=new In;return e.add(n),n.setDisposable(this.source.subscribe(new Ur(t,e))),e},e}(Er),Ur=function(){function t(t,e){this.o=t,this.g=e,this.isStopped=!1,this.done=!1}function e(t,e,n){this.parent=t,this.g=e,this.sad=n,this.isStopped=!1}return t.prototype.onNext=function(t){if(!this.isStopped){var n=new In;this.g.add(n),Te(t)&&(t=xr(t)),n.setDisposable(t.subscribe(new e(this,this.g,n)))}},t.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.done=!0,1===this.g.length&&this.o.onCompleted())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.o.onError(t),!0)},e.prototype.onNext=function(t){this.isStopped||this.parent.o.onNext(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.parent.o.onError(t))},e.prototype.onCompleted=function(){if(!this.isStopped){var t=this.parent;this.isStopped=!0,t.g.remove(this.sad),t.done&&1===t.g.length&&t.o.onCompleted()}},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.parent.o.onError(t),!0)},t}();dr.mergeAll=dr.mergeObservable=function(){return new Br(this)};var Qr=De.CompositeError=function(t){this.name="NotImplementedError",this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Qr.prototype=Error.prototype,gr.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}var r=W(null,t);return new wo(function(t){function e(){0===s.length?t.onCompleted():t.onError(1===s.length?s[0]:new Qr(s))}var n=new Tn,o=new In,i=!1,s=[];return n.add(o),o.setDisposable(r.subscribe(function(r){var o=new In;n.add(o),Te(r)&&(r=xr(r)),o.setDisposable(r.subscribe(function(e){t.onNext(e)},function(t){s.push(t),n.remove(o),i&&1===n.length&&e()},function(){n.remove(o),i&&1===n.length&&e()}))},function(t){s.push(t),i=!0,1===n.length&&e()},function(){i=!0,1===n.length&&e()})),n})},dr.onErrorResumeNext=function(t){if(!t)throw new Error("Second observable is required");return $r([this,t])};var $r=gr.onErrorResumeNext=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return new wo(function(e){var n=0,r=new Bn,o=Kn.scheduleRecursive(function(o){var i,s;n<t.length?(i=t[n++],Te(i)&&(i=xr(i)),s=new In,r.setDisposable(s),s.setDisposable(i.subscribe(e.onNext.bind(e),o,o))):e.onCompleted()});return new Tn(r,o)})};dr.skipUntil=function(t){var e=this;return new wo(function(n){var r=!1,o=new Tn(e.subscribe(function(t){r&&n.onNext(t)},function(t){n.onError(t)},function(){r&&n.onCompleted()}));Te(t)&&(t=xr(t));var i=new In;return o.add(i),i.setDisposable(t.subscribe(function(){r=!0,i.dispose()},function(t){n.onError(t)},function(){i.dispose()})),o},e)},dr["switch"]=dr.switchLatest=function(){var t=this;return new wo(function(e){var n=!1,r=new Bn,o=!1,i=0,s=t.subscribe(function(t){var s=new In,u=++i;n=!0,r.setDisposable(s),Te(t)&&(t=xr(t)),s.setDisposable(t.subscribe(function(t){i===u&&e.onNext(t)},function(t){i===u&&e.onError(t)},function(){i===u&&(n=!1,o&&e.onCompleted())}))},function(t){e.onError(t)},function(){o=!0,!n&&e.onCompleted()});return new Tn(s,r)},t)},dr.takeUntil=function(t){var e=this;return new wo(function(n){return Te(t)&&(t=xr(t)),new Tn(e.subscribe(n),t.subscribe(function(){n.onCompleted()},function(t){n.onError(t)},_e))},e)},dr.withLatestFrom=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=e.pop(),o=this;if("undefined"==typeof o)throw new Error("Source observable not found for withLatestFrom().");if("function"!=typeof r)throw new Error("withLatestFrom() expects a resultSelector function.");return Array.isArray(e[0])&&(e=e[0]),new wo(function(t){for(var n=function(){return!1},i=e.length,s=d(i,n),u=!1,c=new Array(i),a=new Array(i+1),h=0;i>h;h++)!function(n){var r=e[n],o=new In;Te(r)&&(r=xr(r)),o.setDisposable(r.subscribe(function(t){c[n]=t,s[n]=!0,u=s.every(ke)},t.onError.bind(t),function(){})),a[n]=o}(h);var f=new In;return f.setDisposable(o.subscribe(function(e){var n,o=[e].concat(c);if(u){try{n=r.apply(null,o)}catch(i){return void t.onError(i)}t.onNext(n)}},t.onError.bind(t),function(){t.onCompleted()})),a[i]=f,new Tn(a)},this)},dr.zip=function(){if(Array.isArray(arguments[0]))return R.apply(this,arguments);for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=this,o=e.pop();return e.unshift(r),new wo(function(t){function n(e){var n,i;if(u.every(function(t){return t.length>0})){try{i=u.map(function(t){return t.shift()}),n=o.apply(r,i)}catch(s){return void t.onError(s)}t.onNext(n)}else c.filter(function(t,n){return n!==e}).every(ke)&&t.onCompleted()}function i(e){c[e]=!0,c.every(function(t){return t})&&t.onCompleted()}for(var s=e.length,u=d(s,T),c=d(s,j),a=new Array(s),h=0;s>h;h++)!function(r){var o=e[r],s=new In;Te(o)&&(o=xr(o)),s.setDisposable(o.subscribe(function(t){u[r].push(t),n(r)},function(e){t.onError(e)},function(){i(r)})),a[r]=s}(h);return new Tn(a)},r)},gr.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=e.shift();return r.zip.apply(r,e)},gr.zipArray=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new wo(function(e){function n(t){if(i.every(function(t){return t.length>0})){var n=i.map(function(t){return t.shift()});e.onNext(n)}else if(s.filter(function(e,n){return n!==t}).every(ke))return void e.onCompleted()}function r(t){return s[t]=!0,s.every(ke)?void e.onCompleted():void 0}for(var o=t.length,i=d(o,function(){return[]}),s=d(o,function(){return!1}),u=new Array(o),c=0;o>c;c++)!function(o){u[o]=new In,u[o].setDisposable(t[o].subscribe(function(t){i[o].push(t),n(o)},function(t){e.onError(t)},function(){r(o)}))}(c);return new Tn(u)})},dr.asObservable=function(){var t=this;return new wo(function(e){return t.subscribe(e)},this)},dr.bufferWithCount=function(t,e){return"number"!=typeof e&&(e=t),this.windowWithCount(t,e).selectMany(function(t){return t.toArray()}).where(function(t){return t.length>0})},dr.dematerialize=function(){var t=this;return new wo(function(e){return t.subscribe(function(t){return t.accept(e)},function(t){e.onError(t)},function(){e.onCompleted()})},this)},dr.distinctUntilChanged=function(t,e){var n=this;return e||(e=qe),new wo(function(r){var o,i=!1;return n.subscribe(function(n){var s=n;if(t)try{s=t(n)}catch(u){return void r.onError(u)}if(i)try{var c=e(o,s)}catch(u){return void r.onError(u)}i&&c||(i=!0,o=s,r.onNext(n))},function(t){r.onError(t)},function(){r.onCompleted()})},this)},dr["do"]=dr.tap=dr.doAction=function(t,e,n){var r=this,o="function"==typeof t||"undefined"==typeof t?pr(t||_e,e||_e,n||_e):t;return new wo(function(t){return r.subscribe(function(e){try{o.onNext(e)}catch(n){t.onError(n)}t.onNext(e)},function(e){try{o.onError(e)}catch(n){t.onError(n)}t.onError(e)},function(){try{o.onCompleted()}catch(e){t.onError(e)}t.onCompleted()})},this)},dr.doOnNext=dr.tapOnNext=function(t,e){return this.tap("undefined"!=typeof e?function(n){t.call(e,n)}:t)},dr.doOnError=dr.tapOnError=function(t,e){return this.tap(_e,"undefined"!=typeof e?function(n){t.call(e,n)}:t)},dr.doOnCompleted=dr.tapOnCompleted=function(t,e){return this.tap(_e,null,"undefined"!=typeof e?function(){t.call(e)}:t)},dr["finally"]=dr.ensure=function(t){var e=this;return new wo(function(n){var r;try{r=e.subscribe(n)}catch(o){throw t(),o}return Ln(function(){try{r.dispose()}catch(e){throw e}finally{t()}})},this)},dr.finallyAction=function(t){return this.ensure(t)},dr.ignoreElements=function(){var t=this;return new wo(function(e){return t.subscribe(_e,function(t){e.onError(t)},function(){e.onCompleted()})},t)},dr.materialize=function(){var t=this;return new wo(function(e){return t.subscribe(function(t){e.onNext(ir(t))},function(t){e.onNext(sr(t)),e.onCompleted()},function(){e.onNext(ur()),e.onCompleted()})},t)},dr.repeat=function(t){return hr(this,t).concat()},dr.retry=function(t){return hr(this,t).catchError()},dr.retryWhen=function(t){return hr(this).catchErrorWhen(t)},dr.scan=function(){var t,e,n=!1,r=this;return 2===arguments.length?(n=!0,t=arguments[0],e=arguments[1]):e=arguments[0],new wo(function(o){var i,s,u;return r.subscribe(function(r){!u&&(u=!0);try{i?s=e(s,r):(s=n?e(t,r):r,i=!0)}catch(c){return void o.onError(c)}o.onNext(s)},function(t){o.onError(t)},function(){!u&&n&&o.onNext(t),o.onCompleted()})},r)},dr.skipLast=function(t){if(0>t)throw new Qe;var e=this;return new wo(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&n.onNext(r.shift())},function(t){n.onError(t)},function(){n.onCompleted()})},e)},dr.startWith=function(){var t,e=0;arguments.length&&Oe(arguments[0])?(t=arguments[0],e=1):t=Kn;for(var n=[],r=e,o=arguments.length;o>r;r++)n.push(arguments[r]);return fr([Wr(n,t),this]).concat()},dr.takeLast=function(t){if(0>t)throw new Qe;var e=this;return new wo(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},function(t){n.onError(t)},function(){for(;r.length>0;)n.onNext(r.shift());n.onCompleted()})},e)},dr.takeLastBuffer=function(t){var e=this;return new wo(function(n){var r=[];return e.subscribe(function(e){r.push(e),r.length>t&&r.shift()},function(t){n.onError(t)},function(){n.onNext(r),n.onCompleted()})},e)},dr.windowWithCount=function(t,e){var n=this;if(+t||(t=0),1/0===Math.abs(t)&&(t=0),0>=t)throw new Qe;if(null==e&&(e=t),+e||(e=0),1/0===Math.abs(e)&&(e=0),0>=e)throw new Qe;return new wo(function(r){function o(){var t=new Eo;c.push(t),r.onNext(Wn(t,s))}var i=new In,s=new Un(i),u=0,c=[];return o(),i.setDisposable(n.subscribe(function(n){for(var r=0,i=c.length;i>r;r++)c[r].onNext(n);var s=u-t+1;s>=0&&s%e===0&&c.shift().onCompleted(),++u%e===0&&o()},function(t){for(;c.length>0;)c.shift().onError(t);r.onError(t)},function(){for(;c.length>0;)c.shift().onCompleted();r.onCompleted()})),s},n)},dr.selectConcat=dr.concatMap=function(t,e,n){return ze(t)&&ze(e)?this.concatMap(function(n,r){var o=t(n,r);return Te(o)&&(o=xr(o)),(Ze(o)||Ye(o))&&(o=Or(o)),o.map(function(t,o){return e(n,t,r,o)})}):ze(t)?P(this,t,n):P(this,function(){return t})},dr.concatMapObserver=dr.selectConcatObserver=function(t,e,n,r){var o=this,i=en(t,r,2),s=en(e,r,1),u=en(n,r,0);return new wo(function(t){var e=0;return o.subscribe(function(n){var r;try{r=i(n,e++)}catch(o){return void t.onError(o)}Te(r)&&(r=xr(r)),t.onNext(r)},function(e){var n;try{n=s(e)}catch(r){return void t.onError(r)}Te(n)&&(n=xr(n)),t.onNext(n),t.onCompleted()},function(){var e;try{e=u()}catch(n){return void t.onError(n)}Te(e)&&(e=xr(e)),t.onNext(e),t.onCompleted()})},this).concatAll()},dr.defaultIfEmpty=function(e){var n=this;return e===t&&(e=null),new wo(function(t){var r=!1;return n.subscribe(function(e){r=!0,t.onNext(e)},function(e){t.onError(e)},function(){!r&&t.onNext(e),t.onCompleted()})},n)},L.prototype.push=function(t){var e=-1===z(this.set,t,this.comparer);return e&&this.set.push(t),e},dr.distinct=function(t,e){var n=this;return e||(e=qe),new wo(function(r){var o=new L(e);return n.subscribe(function(e){var n=e;if(t)try{n=t(e)}catch(i){return void r.onError(i)}o.push(n)&&r.onNext(e)},function(t){r.onError(t)},function(){r.onCompleted()})},this)},dr.groupBy=function(t,e,n){return this.groupByUntil(t,e,qr,n)},dr.groupByUntil=function(t,e,n,r){var o=this;return e||(e=ke),r||(r=qe),new wo(function(i){function s(t){return function(e){e.onError(t)}}var u=new ho(0,r),c=new Tn,a=new Un(c);return c.add(o.subscribe(function(r){var o;try{o=t(r)}catch(h){return u.getValues().forEach(s(h)),void i.onError(h)}var f=!1,l=u.tryGetValue(o);if(l||(l=new Eo,u.set(o,l),f=!0),f){var p=new go(o,l,a),d=new go(o,l);try{duration=n(d)}catch(h){return u.getValues().forEach(s(h)),void i.onError(h)}i.onNext(p);var v=new In;c.add(v);var b=function(){u.remove(o)&&l.onCompleted(),c.remove(v)};v.setDisposable(duration.take(1).subscribe(_e,function(t){u.getValues().forEach(s(t)),i.onError(t)},b))}var m;try{m=e(r)}catch(h){return u.getValues().forEach(s(h)),void i.onError(h)}l.onNext(m)},function(t){u.getValues().forEach(s(t)),i.onError(t)},function(){u.getValues().forEach(function(t){t.onCompleted()}),i.onCompleted()})),a},o)};var Hr=function(t){function e(e,n,r){this.source=e,this.selector=en(n,r,3),t.call(this)}return On(e,t),e.prototype.internalMap=function(t,n){var r=this;return new e(this.source,function(e,n,o){return t(r.selector(e,n,o),n,o)},n)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new M(t,this.selector,this))},e}(Er);M.prototype.onNext=function(t){if(!this.isStopped){var e=b(this.selector).call(this,t,this.i++,this.source);return e===qn?this.observer.onError(e.e):void this.observer.onNext(e)}},M.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.observer.onError(t))},M.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.observer.onCompleted())},M.prototype.dispose=function(){this.isStopped=!0},M.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},dr.map=dr.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Hr?this.internalMap(n,e):new Hr(this,n,e)},dr.pluck=function(){var e=arguments,n=arguments.length;if(0===n)throw new Error("List of properties cannot be empty.");return this.map(function(r){for(var o=r,i=0;n>i;i++){var s=o[e[i]];if("undefined"==typeof s)return t;o=s}return o})},dr.selectMany=dr.flatMap=function(t,e,n){return ze(t)&&ze(e)?this.flatMap(function(n,r){var o=t(n,r);return Te(o)&&(o=xr(o)),(Ze(o)||Ye(o))&&(o=Or(o)),o.map(function(t,o){return e(n,t,r,o)})},n):ze(t)?V(this,t,n):V(this,function(){return t})},dr.flatMapObserver=dr.selectManyObserver=function(t,e,n,r){var o=this;return new wo(function(i){var s=0;return o.subscribe(function(e){var n;try{n=t.call(r,e,s++)}catch(o){return void i.onError(o)}Te(n)&&(n=xr(n)),i.onNext(n)},function(t){var n;try{n=e.call(r,t)}catch(o){return void i.onError(o)}Te(n)&&(n=xr(n)),i.onNext(n),i.onCompleted()},function(){var t;try{t=n.call(r)}catch(e){return void i.onError(e)}Te(t)&&(t=xr(t)),i.onNext(t),i.onCompleted()})},o).mergeAll()},dr.selectSwitch=dr.flatMapLatest=dr.switchMap=function(t,e){return this.select(t,e).switchLatest()},dr.skip=function(t){if(0>t)throw new Qe;var e=this;return new wo(function(n){var r=t;return e.subscribe(function(t){0>=r?n.onNext(t):r--},function(t){n.onError(t)},function(){n.onCompleted()})},e)},dr.skipWhile=function(t,e){var n=this,r=en(t,e,3);return new wo(function(t){var e=0,o=!1;return n.subscribe(function(i){if(!o)try{o=!r(i,e++,n)}catch(s){return void t.onError(s)}o&&t.onNext(i)},function(e){t.onError(e)},function(){t.onCompleted()})},n)},dr.take=function(t,e){if(0>t)throw new Qe;if(0===t)return Sr(e);var n=this;return new wo(function(e){var r=t;return n.subscribe(function(t){r-->0&&(e.onNext(t),0===r&&e.onCompleted())},function(t){e.onError(t)},function(){e.onCompleted()})},n)},dr.takeWhile=function(t,e){var n=this,r=en(t,e,3);return new wo(function(t){var e=0,o=!0;return n.subscribe(function(i){if(o){try{o=r(i,e++,n)}catch(s){return void t.onError(s)}o?t.onNext(i):t.onCompleted()}},function(e){t.onError(e)},function(){t.onCompleted()})},n)};var Jr=function(t){function e(e,n,r){this.source=e,this.predicate=en(n,r,3),t.call(this)}return On(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new F(t,this.predicate,this))},e.prototype.internalFilter=function(t,n){var r=this;return new e(this.source,function(e,n,o){return r.predicate(e,n,o)&&t(e,n,o)},n)},e}(Er);F.prototype.onNext=function(t){if(!this.isStopped){var e=b(this.predicate).call(this,t,this.i++,this.source);return e===qn?this.observer.onError(e.e):void(e&&this.observer.onNext(t))}},F.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.observer.onError(t))},F.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.observer.onCompleted())},F.prototype.dispose=function(){this.isStopped=!0},F.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.observer.onError(t),!0)},dr.filter=dr.where=function(t,e){return this instanceof Jr?this.internalFilter(t,e):new Jr(this,t,e)},dr.aggregate=function(){var t,e,n=!1,r=this;return 2===arguments.length?(n=!0,e=arguments[0],t=arguments[1]):t=arguments[0],new wo(function(o){var i,s,u;return r.subscribe(function(r){!u&&(u=!0);try{i?s=t(s,r):(s=n?t(e,r):r,i=!0)}catch(c){return o.onError(c)}},function(t){o.onError(t)},function(){u&&o.onNext(s),!u&&n&&o.onNext(e),!u&&!n&&o.onError(new Be),o.onCompleted()})},r)},dr.reduce=function(t){var e,n=!1,r=this;return 2===arguments.length&&(n=!0,e=arguments[1]),new wo(function(o){var i,s,u;return r.subscribe(function(r){!u&&(u=!0);try{i?s=t(s,r):(s=n?t(e,r):r,i=!0)}catch(c){return o.onError(c)}},function(t){o.onError(t)},function(){u&&o.onNext(s),!u&&n&&o.onNext(e),!u&&!n&&o.onError(new Be),o.onCompleted()})},r)},dr.some=function(t,e){var n=this;return t?n.filter(t,e).some():new wo(function(t){return n.subscribe(function(){t.onNext(!0),t.onCompleted()},function(e){t.onError(e)},function(){t.onNext(!1),t.onCompleted()})},n)},dr.any=function(){return this.some.apply(this,arguments)},dr.isEmpty=function(){return this.any().map(Pe)},dr.every=function(t,e){return this.filter(function(e){return!t(e)},e).some().map(Pe)},dr.all=function(){return this.every.apply(this,arguments)},dr.includes=function(t,e){function n(t,e){return 0===t&&0===e||t===e||isNaN(t)&&isNaN(e)}var r=this;return new wo(function(o){var i=0,s=+e||0;return 1/0===Math.abs(s)&&(s=0),0>s?(o.onNext(!1),o.onCompleted(),Mn):r.subscribe(function(e){i++>=s&&n(e,t)&&(o.onNext(!0),o.onCompleted())},function(t){o.onError(t)},function(){o.onNext(!1),o.onCompleted()})},this)},dr.contains=function(t,e){dr.includes(t,e)},dr.count=function(t,e){return t?this.filter(t,e).count():this.reduce(function(t){return t+1},0)},dr.indexOf=function(t,e){var n=this;return new wo(function(r){var o=0,i=+e||0;return 1/0===Math.abs(i)&&(i=0),0>i?(r.onNext(-1),r.onCompleted(),Mn):n.subscribe(function(e){o>=i&&e===t&&(r.onNext(o),r.onCompleted()),o++},function(t){r.onError(t)},function(){r.onNext(-1),r.onCompleted()})},n)},dr.sum=function(t,e){return t&&ze(t)?this.map(t,e).sum():this.reduce(function(t,e){return t+e},0)},dr.minBy=function(t,e){return e||(e=Re),I(this,t,function(t,n){return-1*e(t,n)})},dr.min=function(t){return this.minBy(ke,t).map(function(t){return B(t)})},dr.maxBy=function(t,e){return e||(e=Re),I(this,t,e)},dr.max=function(t){return this.maxBy(ke,t).map(function(t){return B(t)})},dr.average=function(t,e){return t&&ze(t)?this.map(t,e).average():this.reduce(function(t,e){return{sum:t.sum+e,count:t.count+1}
},{sum:0,count:0}).map(function(t){if(0===t.count)throw new Be;return t.sum/t.count})},dr.sequenceEqual=function(t,e){var n=this;return e||(e=qe),new wo(function(r){var o=!1,i=!1,s=[],u=[],c=n.subscribe(function(t){var n,o;if(u.length>0){o=u.shift();try{n=e(o,t)}catch(c){return void r.onError(c)}n||(r.onNext(!1),r.onCompleted())}else i?(r.onNext(!1),r.onCompleted()):s.push(t)},function(t){r.onError(t)},function(){o=!0,0===s.length&&(u.length>0?(r.onNext(!1),r.onCompleted()):i&&(r.onNext(!0),r.onCompleted()))});(Ze(t)||Ye(t))&&(t=Or(t)),Te(t)&&(t=xr(t));var a=t.subscribe(function(t){var n;if(s.length>0){var i=s.shift();try{n=e(i,t)}catch(c){return void r.onError(c)}n||(r.onNext(!1),r.onCompleted())}else o?(r.onNext(!1),r.onCompleted()):u.push(t)},function(t){r.onError(t)},function(){i=!0,0===u.length&&(s.length>0?(r.onNext(!1),r.onCompleted()):o&&(r.onNext(!0),r.onCompleted()))});return new Tn(c,a)},n)},dr.elementAt=function(t){return U(this,t,!1)},dr.elementAtOrDefault=function(t,e){return U(this,t,!0,e)},dr.single=function(t,e){return t&&ze(t)?this.where(t,e).single():Q(this,!1)},dr.singleOrDefault=function(t,e,n){return t&&ze(t)?this.filter(t,n).singleOrDefault(null,e):Q(this,!0,e)},dr.first=function(t,e){return t?this.where(t,e).first():$(this,!1)},dr.firstOrDefault=function(t,e){return t?this.where(t).firstOrDefault(null,e):$(this,!0,e)},dr.last=function(t,e){return t?this.where(t,e).last():H(this,!1)},dr.lastOrDefault=function(t,e,n){return t?this.where(t,n).lastOrDefault(null,e):H(this,!0,e)},dr.find=function(t,e){return J(this,t,e,!1)},dr.findIndex=function(t,e){return J(this,t,e,!0)},dr.toSet=function(){if("undefined"==typeof xe.Set)throw new TypeError;var t=this;return new wo(function(e){var n=new xe.Set;return t.subscribe(function(t){n.add(t)},function(t){e.onError(t)},function(){e.onNext(n),e.onCompleted()})},t)},dr.toMap=function(t,e){if("undefined"==typeof xe.Map)throw new TypeError;var n=this;return new wo(function(r){var o=new xe.Map;return n.subscribe(function(n){var i;try{i=t(n)}catch(s){return void r.onError(s)}var u=n;if(e)try{u=e(n)}catch(s){return void r.onError(s)}o.set(i,u)},function(t){r.onError(t)},function(){r.onNext(o),r.onCompleted()})},n)};var Gr="function",Kr="throw",Nn=De.internals.isObject,Xr=De.spawn=function(t){var e=te(t);return function(n){function r(t,e){nr.schedule(n.bind(i,t,e))}function o(t,e){var n;if(arguments.length>2)for(var e=[],u=1,c=arguments.length;c>u;u++)e.push(arguments[u]);if(t)try{n=s[Kr](t)}catch(a){return r(a)}if(!t)try{n=s.next(e)}catch(a){return r(a)}if(n.done)return r(null,n.value);if(n.value=G(n.value,i),typeof n.value!==Gr)o(new TypeError("Rx.spawn only supports a function, Promise, Observable, Object or Array."));else{var h=!1;try{n.value.call(i,function(){h||(h=!0,o.apply(i,arguments))})}catch(a){nr.schedule(function(){h||(h=!0,o.call(i,a))})}}}var i=this,s=t;if(e){for(var u=[],c=0,a=arguments.length;a>c;c++)u.push(arguments[c]);var a=u.length,h=a&&typeof u[a-1]===Gr;n=h?u.pop():ne,s=t.apply(this,u)}else n=n||ne;o()}};gr.start=function(t,e,n){return Yr(t,e,n)()};var Yr=gr.toAsync=function(t,e,n){return Oe(n)||(n=nr),function(){var r=arguments,o=new xo;return n.schedule(function(){var n;try{n=t.apply(e,r)}catch(i){return void o.onError(i)}o.onNext(n),o.onCompleted()}),o.asObservable()}};gr.fromCallback=function(t,e,n){return function(){for(var r=[],o=0,i=arguments.length;i>o;o++)r.push(arguments[o]);return new wo(function(o){function i(){var t=arguments;if(n){try{t=n(t)}catch(e){return o.onError(e)}o.onNext(t)}else t.length<=1?o.onNext.apply(o,t):o.onNext(t);o.onCompleted()}r.push(i),t.apply(e,r)}).publishLast().refCount()}},gr.fromNodeCallback=function(t,e,n){return function(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return new wo(function(r){function i(t){if(t)return void r.onError(t);for(var e=arguments.length,o=[],i=1;e>i;i++)o[i-1]=arguments[i];if(n){try{o=n(o)}catch(s){return r.onError(s)}r.onNext(o)}else o.length<=1?r.onNext.apply(r,o):r.onNext(o);r.onCompleted()}o.push(i),t.apply(e,o)}).publishLast().refCount()}},De.config.useNativeEvents=!1,gr.fromEvent=function(t,e,n){return t.addListener?Zr(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):De.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new wo(function(r){return oe(t,e,function(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o)}r.onNext(e)})}).publish().refCount():Zr(function(n){t.on(e,n)},function(n){t.off(e,n)},n)};var Zr=gr.fromEventPattern=function(t,e,n){return new wo(function(r){function o(t){var e=t;if(n)try{e=n(arguments)}catch(o){return r.onError(o)}r.onNext(e)}var i=t(o);return Ln(function(){e&&e(o,i)})}).publish().refCount()};gr.startAsync=function(t){var e;try{e=t()}catch(n){return Pr(n)}return xr(e)};var to=function(t){function e(t){var e=this.source.publish(),n=e.subscribe(t),r=Mn,o=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=Mn)});return new Tn(n,r,o)}function n(n,r){this.source=n,this.controller=new Eo,this.pauser=r&&r.subscribe?this.controller.merge(r):this.controller,t.call(this,e,n)}return On(n,t),n.prototype.pause=function(){this.controller.onNext(!1)},n.prototype.resume=function(){this.controller.onNext(!0)},n}(gr);dr.pausable=function(t){return new to(this,t)};var eo=function(e){function n(e){var n,r=[],o=ie(this.source,this.pauser.distinctUntilChanged().startWith(!1),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){if(n!==t&&o.shouldFire!=n){if(n=o.shouldFire,o.shouldFire)for(;r.length>0;)e.onNext(r.shift())}else n=o.shouldFire,o.shouldFire?e.onNext(o.data):r.push(o.data)},function(t){for(;r.length>0;)e.onNext(r.shift());e.onError(t)},function(){for(;r.length>0;)e.onNext(r.shift());e.onCompleted()});return o}function r(t,r){this.source=t,this.controller=new Eo,this.pauser=r&&r.subscribe?this.controller.merge(r):this.controller,e.call(this,n,t)}return On(r,e),r.prototype.pause=function(){this.controller.onNext(!1)},r.prototype.resume=function(){this.controller.onNext(!0)},r}(gr);dr.pausableBuffered=function(t){return new eo(this,t)};var no=function(t){function e(t){return this.source.subscribe(t)}function n(n,r){t.call(this,e,n),this.subject=new ro(r),this.source=n.multicast(this.subject).refCount()}return On(n,t),n.prototype.request=function(t){return null==t&&(t=-1),this.subject.request(t)},n}(gr),ro=function(t){function e(t){return this.subject.subscribe(t)}function n(n){null==n&&(n=!0),t.call(this,e),this.subject=new Eo,this.enableQueue=n,this.queue=n?[]:null,this.requestedCount=0,this.requestedDisposable=Mn,this.error=null,this.hasFailed=!1,this.hasCompleted=!1}return On(n,t),kn(n.prototype,lr,{onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(De.Notification.createOnCompleted()):this.subject.onCompleted()},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(De.Notification.createOnError(t)):this.subject.onError(t)},onNext:function(t){var e=!1;0===this.requestedCount?this.enableQueue&&this.queue.push(De.Notification.createOnNext(t)):(-1!==this.requestedCount&&0===this.requestedCount--&&this.disposeCurrentRequest(),e=!0),e&&this.subject.onNext(t)},_processRequest:function(t){if(this.enableQueue){for(;this.queue.length>=t&&t>0||this.queue.length>0&&"N"!==this.queue[0].kind;){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return{numberOfItems:t,returnValue:0!==this.queue.length}}return{numberOfItems:t,returnValue:!1}},request:function(t){this.disposeCurrentRequest();var e=this,n=this._processRequest(t),t=n.numberOfItems;return n.returnValue?Mn:(this.requestedCount=t,this.requestedDisposable=Ln(function(){e.requestedCount=0}),this.requestedDisposable)},disposeCurrentRequest:function(){this.requestedDisposable.dispose(),this.requestedDisposable=Mn}}),n}(gr);dr.controlled=function(t){return null==t&&(t=!0),new no(this,t)};var oo=function(t){function e(t){this.subscription=this.source.subscribe(new r(t,this,this.subscription));var e=this;return nr.schedule(function(){e.source.request(1)}),this.subscription}function n(n){t.call(this,e,n),this.source=n}On(n,t);var r=function(t){function e(e,n,r){t.call(this),this.observer=e,this.observable=n,this.cancel=r}On(e,t);var n=e.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(t){this.observer.onError(t),this.dispose()},n.next=function(t){this.observer.onNext(t);var e=this;nr.schedule(function(){e.observable.source.request(1)})},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),t.prototype.dispose.call(this)},e}(vr);return n}(gr);no.prototype.stopAndWait=function(){return new oo(this)};var io=function(t){function e(t){this.subscription=this.source.subscribe(new r(t,this,this.subscription));var e=this;return nr.schedule(function(){e.source.request(e.windowSize)}),this.subscription}function n(n,r){t.call(this,e,n),this.source=n,this.windowSize=r}On(n,t);var r=function(t){function e(t,e,n){this.observer=t,this.observable=e,this.cancel=n,this.received=0}On(e,t);var n=e.prototype;return n.completed=function(){this.observer.onCompleted(),this.dispose()},n.error=function(t){this.observer.onError(t),this.dispose()},n.next=function(t){if(this.observer.onNext(t),this.received=++this.received%this.observable.windowSize,0===this.received){var e=this;nr.schedule(function(){e.observable.source.request(e.observable.windowSize)})}},n.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),t.prototype.dispose.call(this)},e}(vr);return n}(gr);no.prototype.windowed=function(t){return new io(this,t)},dr.multicast=function(t,e){var n=this;return"function"==typeof t?new wo(function(r){var o=n.multicast(t());return new Tn(e(o).subscribe(r),o.connect())},n):new ao(n,t)},dr.publish=function(t){return t&&ze(t)?this.multicast(function(){return new Eo},t):this.multicast(new Eo)},dr.share=function(){return this.publish().refCount()},dr.publishLast=function(t){return t&&ze(t)?this.multicast(function(){return new xo},t):this.multicast(new xo)},dr.publishValue=function(t,e){return 2===arguments.length?this.multicast(function(){return new uo(e)},t):this.multicast(new uo(t))},dr.shareValue=function(t){return this.publishValue(t).refCount()},dr.replay=function(t,e,n,r){return t&&ze(t)?this.multicast(function(){return new co(e,n,r)},t):this.multicast(new co(e,n,r))},dr.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var so=function(t,e){this.subject=t,this.observer=e};so.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var t=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(t,1),this.observer=null}};var uo=De.BehaviorSubject=function(t){function n(t){return Fn(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),Mn):(this.observers.push(t),t.onNext(this.value),new so(this,t))}function r(e){t.call(this,n),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return On(r,t),kn(r.prototype,lr,{getValue:function(){if(Fn(this),this.hasError)throw this.error;return this.value},hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(Fn(this),!this.isStopped){this.isStopped=!0;for(var t=0,n=e(this.observers),r=n.length;r>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(Fn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var n=0,r=e(this.observers),o=r.length;o>n;n++)r[n].onError(t);this.observers.length=0}},onNext:function(t){if(Fn(this),!this.isStopped){this.value=t;for(var n=0,r=e(this.observers),o=r.length;o>n;n++)r[n].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null}}),r}(gr),co=De.ReplaySubject=function(t){function n(t,e){return Ln(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function r(t){var e=new wr(this.scheduler,t),r=n(this,e);Fn(this),this._trim(this.scheduler.now()),this.observers.push(e);for(var o=0,i=this.q.length;i>o;o++)e.onNext(this.q[o].value);return this.hasError?e.onError(this.error):this.isStopped&&e.onCompleted(),e.ensureActive(),r}function o(e,n,o){this.bufferSize=null==e?i:e,this.windowSize=null==n?i:n,this.scheduler=o||Xn,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this,r)}var i=Math.pow(2,53)-1;return On(o,t),kn(o.prototype,lr.prototype,{hasObservers:function(){return this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Fn(this),!this.isStopped){var n=this.scheduler.now();this.q.push({interval:n,value:t}),this._trim(n);for(var r=0,o=e(this.observers),i=o.length;i>r;r++){var s=o[r];s.onNext(t),s.ensureActive()}}},onError:function(t){if(Fn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var n=this.scheduler.now();this._trim(n);for(var r=0,o=e(this.observers),i=o.length;i>r;r++){var s=o[r];s.onError(t),s.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Fn(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var n=0,r=e(this.observers),o=r.length;o>n;n++){var i=r[n];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),o}(gr),ao=De.ConnectableObservable=function(t){function e(e,n){var r,o=!1,i=e.asObservable();this.connect=function(){return o||(o=!0,r=new Tn(i.subscribe(n),Ln(function(){o=!1}))),r},t.call(this,function(t){return n.subscribe(t)})}return On(e,t),e.prototype.refCount=function(){var t,e=0,n=this;return new wo(function(r){var o=1===++e,i=n.subscribe(r);return o&&(t=n.connect()),function(){i.dispose(),0===--e&&t.dispose()}})},e}(gr),ho=function(){function e(t){if(0===(1&t))return 2===t;for(var e=Math.sqrt(t),n=3;e>=n;){if(t%n===0)return!1;n+=2}return!0}function n(t){var n,r,o;for(n=0;n<u.length;++n)if(r=u[n],r>=t)return r;for(o=1|t;o<u[u.length-1];){if(e(o))return o;o+=2}return t}function r(t){var e=757602046;if(!t.length)return e;for(var n=0,r=t.length;r>n;n++){var o=t.charCodeAt(n);e=(e<<5)-e+o,e&=e}return e}function o(t){var e=668265261;return t=61^t^t>>>16,t+=t<<3,t^=t>>>4,t*=e,t^=t>>>15}function i(){return{key:null,value:null,next:0,hashCode:0}}function s(t,e){if(0>t)throw new Qe;t>0&&this._initialize(t),this.comparer=e||qe,this.freeCount=0,this.size=0,this.freeList=-1}var u=[1,3,7,13,31,61,127,251,509,1021,2039,4093,8191,16381,32749,65521,131071,262139,524287,1048573,2097143,4194301,8388593,16777213,33554393,67108859,134217689,268435399,536870909,1073741789,2147483647],c="no such key",a="duplicate key",h=function(){var t=0;return function(e){if(null==e)throw new Error(c);if("string"==typeof e)return r(e);if("number"==typeof e)return o(e);if("boolean"==typeof e)return e===!0?1:0;if(e instanceof Date)return o(e.valueOf());if(e instanceof RegExp)return r(e.toString());if("function"==typeof e.valueOf){var n=e.valueOf();if("number"==typeof n)return o(n);if("string"==typeof n)return r(n)}if(e.hashCode)return e.hashCode();var i=17*t++;return e.hashCode=function(){return i},i}}(),f=s.prototype;return f._initialize=function(t){var e,r=n(t);for(this.buckets=new Array(r),this.entries=new Array(r),e=0;r>e;e++)this.buckets[e]=-1,this.entries[e]=i();this.freeList=-1},f.add=function(t,e){this._insert(t,e,!0)},f._insert=function(t,e,n){this.buckets||this._initialize(0);for(var r,o=2147483647&h(t),i=o%this.buckets.length,s=this.buckets[i];s>=0;s=this.entries[s].next)if(this.entries[s].hashCode===o&&this.comparer(this.entries[s].key,t)){if(n)throw new Error(a);return void(this.entries[s].value=e)}this.freeCount>0?(r=this.freeList,this.freeList=this.entries[r].next,--this.freeCount):(this.size===this.entries.length&&(this._resize(),i=o%this.buckets.length),r=this.size,++this.size),this.entries[r].hashCode=o,this.entries[r].next=this.buckets[i],this.entries[r].key=t,this.entries[r].value=e,this.buckets[i]=r},f._resize=function(){var t=n(2*this.size),e=new Array(t);for(o=0;o<e.length;++o)e[o]=-1;var r=new Array(t);for(o=0;o<this.size;++o)r[o]=this.entries[o];for(var o=this.size;t>o;++o)r[o]=i();for(var s=0;s<this.size;++s){var u=r[s].hashCode%t;r[s].next=e[u],e[u]=s}this.buckets=e,this.entries=r},f.remove=function(t){if(this.buckets)for(var e=2147483647&h(t),n=e%this.buckets.length,r=-1,o=this.buckets[n];o>=0;o=this.entries[o].next){if(this.entries[o].hashCode===e&&this.comparer(this.entries[o].key,t))return 0>r?this.buckets[n]=this.entries[o].next:this.entries[r].next=this.entries[o].next,this.entries[o].hashCode=-1,this.entries[o].next=this.freeList,this.entries[o].key=null,this.entries[o].value=null,this.freeList=o,++this.freeCount,!0;r=o}return!1},f.clear=function(){var t,e;if(!(this.size<=0)){for(t=0,e=this.buckets.length;e>t;++t)this.buckets[t]=-1;for(t=0;t<this.size;++t)this.entries[t]=i();this.freeList=-1,this.size=0}},f._findEntry=function(t){if(this.buckets)for(var e=2147483647&h(t),n=this.buckets[e%this.buckets.length];n>=0;n=this.entries[n].next)if(this.entries[n].hashCode===e&&this.comparer(this.entries[n].key,t))return n;return-1},f.count=function(){return this.size-this.freeCount},f.tryGetValue=function(e){var n=this._findEntry(e);return n>=0?this.entries[n].value:t},f.getValues=function(){var t=0,e=[];if(this.entries)for(var n=0;n<this.size;n++)this.entries[n].hashCode>=0&&(e[t++]=this.entries[n].value);return e},f.get=function(t){var e=this._findEntry(t);if(e>=0)return this.entries[e].value;throw new Error(c)},f.set=function(t,e){this._insert(t,e,!1)},f.containskey=function(t){return this._findEntry(t)>=0},s}();dr.join=function(t,e,n,r){var o=this;return new wo(function(i){var s=new Tn,u=!1,c=!1,a=0,h=0,f=new ho,l=new ho;return s.add(o.subscribe(function(t){var n=a++,o=new In;f.add(n,t),s.add(o);var c,h=function(){f.remove(n)&&0===f.count()&&u&&i.onCompleted(),s.remove(o)};try{c=e(t)}catch(p){return void i.onError(p)}o.setDisposable(c.take(1).subscribe(_e,i.onError.bind(i),h)),l.getValues().forEach(function(e){var n;try{n=r(t,e)}catch(o){return void i.onError(o)}i.onNext(n)})},i.onError.bind(i),function(){u=!0,(c||0===f.count())&&i.onCompleted()})),s.add(t.subscribe(function(t){var e=h++,o=new In;l.add(e,t),s.add(o);var u,a=function(){l.remove(e)&&0===l.count()&&c&&i.onCompleted(),s.remove(o)};try{u=n(t)}catch(p){return void i.onError(p)}o.setDisposable(u.take(1).subscribe(_e,i.onError.bind(i),a)),f.getValues().forEach(function(e){var n;try{n=r(e,t)}catch(o){return void i.onError(o)}i.onNext(n)})},i.onError.bind(i),function(){c=!0,(u||0===l.count())&&i.onCompleted()})),s},o)},dr.groupJoin=function(t,e,n,r){var o=this;return new wo(function(i){function s(t){return function(e){e.onError(t)}}var u=new Tn,c=new Un(u),a=new ho,h=new ho,f=0,l=0;return u.add(o.subscribe(function(t){var n=new Eo,o=f++;a.add(o,n);var l;try{l=r(t,Wn(n,c))}catch(p){return a.getValues().forEach(s(p)),void i.onError(p)}i.onNext(l),h.getValues().forEach(function(t){n.onNext(t)});var d=new In;u.add(d);var v,b=function(){a.remove(o)&&n.onCompleted(),u.remove(d)};try{v=e(t)}catch(p){return a.getValues().forEach(s(p)),void i.onError(p)}d.setDisposable(v.take(1).subscribe(_e,function(t){a.getValues().forEach(s(t)),i.onError(t)},b))},function(t){a.getValues().forEach(s(t)),i.onError(t)},i.onCompleted.bind(i))),u.add(t.subscribe(function(t){var e=l++;h.add(e,t);var r=new In;u.add(r);var o,c=function(){h.remove(e),u.remove(r)};try{o=n(t)}catch(f){return a.getValues().forEach(s(f)),void i.onError(f)}r.setDisposable(o.take(1).subscribe(_e,function(t){a.getValues().forEach(s(t)),i.onError(t)},c)),a.getValues().forEach(function(e){e.onNext(t)})},function(t){a.getValues().forEach(s(t)),i.onError(t)})),c},o)},dr.buffer=function(){return this.window.apply(this,arguments).selectMany(function(t){return t.toArray()})},dr.window=function(t,e){return 1===arguments.length&&"function"!=typeof arguments[0]?ue.call(this,t):"function"==typeof t?ce.call(this,t):se.call(this,t,e)},dr.pairwise=function(){var t=this;return new wo(function(e){var n,r=!1;return t.subscribe(function(t){r?e.onNext([n,t]):r=!0,n=t},e.onError.bind(e),e.onCompleted.bind(e))},t)},dr.partition=function(t,e){return[this.filter(t,e),this.filter(function(n,r,o){return!t.call(e,n,r,o)})]},dr.letBind=dr.let=function(t){return t(this)},gr["if"]=gr.ifThen=function(t,e,n){return Nr(function(){return n||(n=Sr()),Te(e)&&(e=xr(e)),Te(n)&&(n=xr(n)),"function"==typeof n.now&&(n=Sr(n)),t()?e:n})},gr["for"]=gr.forIn=function(t,e,n){return fr(t,e,n).concat()};var fo=gr["while"]=gr.whileDo=function(t,e){return Te(e)&&(e=xr(e)),ae(t,e).concat()};dr.doWhile=function(t){return Mr([this,fo(t,this)])},gr["case"]=gr.switchCase=function(t,e,n){return Nr(function(){Te(n)&&(n=xr(n)),n||(n=Sr()),"function"==typeof n.now&&(n=Sr(n));var r=e[t()];return Te(r)&&(r=xr(r)),r||n})},dr.expand=function(t,e){Oe(e)||(e=Kn);var n=this;return new wo(function(r){var o=[],i=new Bn,s=new Tn(i),u=0,c=!1,a=function(){var n=!1;o.length>0&&(n=!c,c=!0),n&&i.setDisposable(e.scheduleRecursive(function(e){var n;if(!(o.length>0))return void(c=!1);n=o.shift();var i=new In;s.add(i),i.setDisposable(n.subscribe(function(e){r.onNext(e);var n=null;try{n=t(e)}catch(i){r.onError(i)}o.push(n),u++,a()},r.onError.bind(r),function(){s.remove(i),u--,0===u&&r.onCompleted()})),e()}))};return o.push(n),u++,a(),s},this)},gr.forkJoin=function(){var t=[];if(Array.isArray(arguments[0]))t=arguments[0];else for(var e=0,n=arguments.length;n>e;e++)t.push(arguments[e]);return new wo(function(e){var n=t.length;if(0===n)return e.onCompleted(),Mn;for(var r=new Tn,o=!1,i=new Array(n),s=new Array(n),u=new Array(n),c=0;n>c;c++)!function(c){var a=t[c];Te(a)&&(a=xr(a)),r.add(a.subscribe(function(t){o||(i[c]=!0,u[c]=t)},function(t){o=!0,e.onError(t),r.dispose()},function(){if(!o){if(!i[c])return void e.onCompleted();s[c]=!0;for(var t=0;n>t;t++)if(!s[t])return;o=!0,e.onNext(u),e.onCompleted()}}))}(c);return r})},dr.forkJoin=function(t,e){var n=this;return new wo(function(r){var o,i,s=!1,u=!1,c=!1,a=!1,h=new In,f=new In;return Te(t)&&(t=xr(t)),h.setDisposable(n.subscribe(function(t){c=!0,o=t},function(t){f.dispose(),r.onError(t)},function(){if(s=!0,u)if(c)if(a){var t;try{t=e(o,i)}catch(n){return void r.onError(n)}r.onNext(t),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),f.setDisposable(t.subscribe(function(t){a=!0,i=t},function(t){h.dispose(),r.onError(t)},function(){if(u=!0,s)if(c)if(a){var t;try{t=e(o,i)}catch(n){return void r.onError(n)}r.onNext(t),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),new Tn(h,f)},n)},dr.manySelect=function(t,e){Oe(e)||(e=Kn);var n=this;return Nr(function(){var r;return n.map(function(t){var e=new lo(t);return r&&r.onNext(t),r=e,e}).tap(_e,function(t){r&&r.onError(t)},function(){r&&r.onCompleted()}).observeOn(e).map(t)},n)};var lo=function(t){function e(t){var e=this,n=new Tn;return n.add(Xn.schedule(function(){t.onNext(e.head),n.add(e.tail.mergeAll().subscribe(t))})),n}function n(n){t.call(this,e),this.head=n,this.tail=new xo}return On(n,t),kn(n.prototype,lr,{onCompleted:function(){this.onNext(gr.empty())},onError:function(t){this.onNext(gr.throwError(t))},onNext:function(t){this.tail.onNext(t),this.tail.onCompleted()}}),n}(gr),po=xe.Map||function(){function e(){this._keys=[],this._values=[]}return e.prototype.get=function(e){var n=this._keys.indexOf(e);return-1!==n?this._values[n]:t},e.prototype.set=function(t,e){var n=this._keys.indexOf(t);-1!==n&&(this._values[n]=e),this._values[this._keys.push(t)-1]=e},e.prototype.forEach=function(t,e){for(var n=0,r=this._keys.length;r>n;n++)t.call(e,this._values[n],this._keys[n])},e}();he.prototype.and=function(t){return new he(this.patterns.concat(t))},he.prototype.thenDo=function(t){return new fe(this,t)},fe.prototype.activate=function(t,e,n){for(var r=this,o=[],i=0,s=this.expression.patterns.length;s>i;i++)o.push(le(t,this.expression.patterns[i],e.onError.bind(e)));var u=new pe(o,function(){var t;try{t=r.selector.apply(r,arguments)}catch(n){return void e.onError(n)}e.onNext(t)},function(){for(var t=0,e=o.length;e>t;t++)o[t].removeActivePlan(u);n(u)});for(i=0,s=o.length;s>i;i++)o[i].addActivePlan(u);return u},pe.prototype.dequeue=function(){this.joinObservers.forEach(function(t){t.queue.shift()})},pe.prototype.match=function(){var t,e,n=!0;for(t=0,e=this.joinObserverArray.length;e>t;t++)if(0===this.joinObserverArray[t].queue.length){n=!1;break}if(n){var r=[],o=!1;for(t=0,e=this.joinObserverArray.length;e>t;t++)r.push(this.joinObserverArray[t].queue[0]),"C"===this.joinObserverArray[t].queue[0].kind&&(o=!0);if(o)this.onCompleted();else{this.dequeue();var i=[];for(t=0,e=r.length;t<r.length;t++)i.push(r[t].value);this.onNext.apply(this,i)}}};var vo=function(t){function e(e,n){t.call(this),this.source=e,this.onError=n,this.queue=[],this.activePlans=[],this.subscription=new In,this.isDisposed=!1}On(e,t);var n=e.prototype;return n.next=function(t){if(!this.isDisposed){if("E"===t.kind)return this.onError(t.exception);this.queue.push(t);for(var e=this.activePlans.slice(0),n=0,r=e.length;r>n;n++)e[n].match()}},n.error=_e,n.completed=_e,n.addActivePlan=function(t){this.activePlans.push(t)},n.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},n.removeActivePlan=function(t){this.activePlans.splice(this.activePlans.indexOf(t),1),0===this.activePlans.length&&this.dispose()},n.dispose=function(){t.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},e}(vr);dr.and=function(t){return new he([this,t])},dr.thenDo=function(t){return new he([this]).thenDo(t)},gr.when=function(){var t,e=arguments.length;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(e);for(var n=0;e>n;n++)t[n]=arguments[n]}return new wo(function(e){var n=[],r=new po,o=pr(function(t){e.onNext(t)},function(t){r.forEach(function(e){e.onError(t)}),e.onError(t)},function(){e.onCompleted()});try{for(var i=0,s=t.length;s>i;i++)n.push(t[i].activate(r,o,function(t){var r=n.indexOf(t);n.splice(r,1),0===n.length&&e.onCompleted()}))}catch(u){Pr(u).subscribe(e)}var c=new Tn;return r.forEach(function(t){t.subscribe(),c.add(t)}),c})};var bo=gr.interval=function(t,e){return me(t,t,Oe(e)?e:nr)},mo=gr.timer=function(e,n,r){var o;return Oe(r)||(r=nr),n!==t&&"number"==typeof n?o=n:Oe(n)&&(r=n),e instanceof Date&&o===t?de(e.getTime(),r):e instanceof Date&&o!==t?(o=n,ve(e.getTime(),o,r)):o===t?be(e,r):me(e,o,r)};dr.delay=function(t,e){return Oe(e)||(e=nr),t instanceof Date?ye(this,t.getTime(),e):we(this,t,e)},dr.debounce=dr.throttleWithTimeout=function(t,e){Oe(e)||(e=nr);var n=this;return new wo(function(r){var o,i=new Bn,s=!1,u=0,c=n.subscribe(function(n){s=!0,o=n,u++;var c=u,a=new In;i.setDisposable(a),a.setDisposable(e.scheduleWithRelative(t,function(){s&&u===c&&r.onNext(o),s=!1}))},function(t){i.dispose(),r.onError(t),s=!1,u++},function(){i.dispose(),s&&r.onNext(o),r.onCompleted(),s=!1,u++});return new Tn(c,i)},this)},dr.throttle=function(t,e){return this.debounce(t,e)},dr.windowWithTime=function(t,e,n){var r,o=this;return null==e&&(r=t),Oe(n)||(n=nr),"number"==typeof e?r=e:Oe(e)&&(r=t,n=e),new wo(function(e){function i(){var t=new In,o=!1,s=!1;f.setDisposable(t),a===c?(o=!0,s=!0):c>a?o=!0:s=!0;var p=o?a:c,d=p-l;l=p,o&&(a+=r),s&&(c+=r),t.setDisposable(n.scheduleWithRelative(d,function(){if(s){var t=new Eo;h.push(t),e.onNext(Wn(t,u))}o&&h.shift().onCompleted(),i()}))}var s,u,c=r,a=t,h=[],f=new Bn,l=0;return s=new Tn(f),u=new Un(s),h.push(new Eo),e.onNext(Wn(h[0],u)),i(),s.add(o.subscribe(function(t){for(var e=0,n=h.length;n>e;e++)h[e].onNext(t)},function(t){for(var n=0,r=h.length;r>n;n++)h[n].onError(t);e.onError(t)},function(){for(var t=0,n=h.length;n>t;t++)h[t].onCompleted();e.onCompleted()})),u},o)},dr.windowWithTimeOrCount=function(t,e,n){var r=this;return Oe(n)||(n=nr),new wo(function(o){function i(e){var r=new In;s.setDisposable(r),r.setDisposable(n.scheduleWithRelative(t,function(){if(e===h){a=0;var t=++h;f.onCompleted(),f=new Eo,o.onNext(Wn(f,c)),i(t)}}))}var s=new Bn,u=new Tn(s),c=new Un(u),a=0,h=0,f=new Eo;return o.onNext(Wn(f,c)),i(0),u.add(r.subscribe(function(t){var n=0,r=!1;f.onNext(t),++a===e&&(r=!0,a=0,n=++h,f.onCompleted(),f=new Eo,o.onNext(Wn(f,c))),r&&i(n)},function(t){f.onError(t),o.onError(t)},function(){f.onCompleted(),o.onCompleted()})),c},r)},dr.bufferWithTime=function(){return this.windowWithTime.apply(this,arguments).selectMany(function(t){return t.toArray()})},dr.bufferWithTimeOrCount=function(t,e,n){return this.windowWithTimeOrCount(t,e,n).selectMany(function(t){return t.toArray()})},dr.timeInterval=function(t){var e=this;return Oe(t)||(t=nr),Nr(function(){var n=t.now();return e.map(function(e){var r=t.now(),o=r-n;return n=r,{value:e,interval:o}})})},dr.timestamp=function(t){return Oe(t)||(t=nr),this.map(function(e){return{value:e,timestamp:t.now()}})},dr.sample=dr.throttleLatest=function(t,e){return Oe(e)||(e=nr),"number"==typeof t?ge(this,bo(t,e)):ge(this,t)},dr.timeout=function(t,e,n){(null==e||"string"==typeof e)&&(e=Pr(new Error(e||"Timeout"))),Oe(n)||(n=nr);var r=this,o=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new wo(function(i){function s(){var r=u;f.setDisposable(n[o](t,function(){u===r&&(Te(e)&&(e=xr(e)),a.setDisposable(e.subscribe(i)))}))}var u=0,c=new In,a=new Bn,h=!1,f=new Bn;return a.setDisposable(c),s(),c.setDisposable(r.subscribe(function(t){h||(u++,i.onNext(t),s())},function(t){h||(u++,i.onError(t))},function(){h||(u++,i.onCompleted())})),new Tn(a,f)},r)},gr.generateWithAbsoluteTime=function(t,e,n,r,o,i){return Oe(i)||(i=nr),new wo(function(s){var u,c,a=!0,h=!1,f=t;return i.scheduleRecursiveWithAbsolute(i.now(),function(t){h&&s.onNext(u);try{a?a=!1:f=n(f),h=e(f),h&&(u=r(f),c=o(f))}catch(i){return void s.onError(i)}h?t(c):s.onCompleted()})})},gr.generateWithRelativeTime=function(t,e,n,r,o,i){return Oe(i)||(i=nr),new wo(function(s){var u,c,a=!0,h=!1,f=t;return i.scheduleRecursiveWithRelative(0,function(t){h&&s.onNext(u);try{a?a=!1:f=n(f),h=e(f),h&&(u=r(f),c=o(f))}catch(i){return void s.onError(i)}h?t(c):s.onCompleted()})})},dr.delaySubscription=function(t,e){return this.delayWithSelector(mo(t,Oe(e)?e:nr),Sr)},dr.delayWithSelector=function(t,e){var n,r,o=this;return"function"==typeof t?r=t:(n=t,r=e),new wo(function(t){var e=new Tn,i=!1,s=function(){i&&0===e.length&&t.onCompleted()},u=new Bn,c=function(){u.setDisposable(o.subscribe(function(n){var o;try{o=r(n)}catch(i){return void t.onError(i)}var u=new In;e.add(u),u.setDisposable(o.subscribe(function(){t.onNext(n),e.remove(u),s()},t.onError.bind(t),function(){t.onNext(n),e.remove(u),s()}))},t.onError.bind(t),function(){i=!0,u.dispose(),s()}))};return n?u.setDisposable(n.subscribe(c,t.onError.bind(t),c)):c(),new Tn(u,e)},this)},dr.timeoutWithSelector=function(t,e,n){1===arguments.length&&(e=t,t=qr()),n||(n=Pr(new Error("Timeout")));var r=this;return new wo(function(o){function i(t){function e(){return h===r}var r=h,i=new In;c.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&u.setDisposable(n.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&u.setDisposable(n.subscribe(o))}))}function s(){var t=!f;return t&&h++,t}var u=new Bn,c=new Bn,a=new In;u.setDisposable(a);var h=0,f=!1;return i(t),a.setDisposable(r.subscribe(function(t){if(s()){o.onNext(t);var n;try{n=e(t)}catch(r){return void o.onError(r)}i(Te(n)?xr(n):n)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new Tn(u,c)},r)},dr.debounceWithSelector=function(t){var e=this;return new wo(function(n){var r,o=!1,i=new Bn,s=0,u=e.subscribe(function(e){var u;try{u=t(e)}catch(c){return void n.onError(c)}Te(u)&&(u=xr(u)),o=!0,r=e,s++;var a=s,h=new In;i.setDisposable(h),h.setDisposable(u.subscribe(function(){o&&s===a&&n.onNext(r),o=!1,h.dispose()
},n.onError.bind(n),function(){o&&s===a&&n.onNext(r),o=!1,h.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new Tn(u,i)},e)},dr.throttleWithSelector=function(){return this.debounceWithSelector.apply(this,arguments)},dr.skipLastWithTime=function(t,e){Oe(e)||(e=nr);var n=this;return new wo(function(r){var o=[];return n.subscribe(function(n){var i=e.now();for(o.push({interval:i,value:n});o.length>0&&i-o[0].interval>=t;)r.onNext(o.shift().value)},function(t){r.onError(t)},function(){for(var n=e.now();o.length>0&&n-o[0].interval>=t;)r.onNext(o.shift().value);r.onCompleted()})},n)},dr.takeLastWithTime=function(t,e){var n=this;return Oe(e)||(e=nr),new wo(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now();o.length>0;){var i=o.shift();n-i.interval<=t&&r.onNext(i.value)}r.onCompleted()})},n)},dr.takeLastBufferWithTime=function(t,e){var n=this;return Oe(e)||(e=nr),new wo(function(r){var o=[];return n.subscribe(function(n){var r=e.now();for(o.push({interval:r,value:n});o.length>0&&r-o[0].interval>=t;)o.shift()},function(t){r.onError(t)},function(){for(var n=e.now(),i=[];o.length>0;){var s=o.shift();n-s.interval<=t&&i.push(s.value)}r.onNext(i),r.onCompleted()})},n)},dr.takeWithTime=function(t,e){var n=this;return Oe(e)||(e=nr),new wo(function(r){return new Tn(e.scheduleWithRelative(t,function(){r.onCompleted()}),n.subscribe(r))},n)},dr.skipWithTime=function(t,e){var n=this;return Oe(e)||(e=nr),new wo(function(r){var o=!1;return new Tn(e.scheduleWithRelative(t,function(){o=!0}),n.subscribe(function(t){o&&r.onNext(t)},r.onError.bind(r),r.onCompleted.bind(r)))},n)},dr.skipUntilWithTime=function(t,e){Oe(e)||(e=nr);var n=this,r=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new wo(function(o){var i=!1;return new Tn(e[r](t,function(){i=!0}),n.subscribe(function(t){i&&o.onNext(t)},function(t){o.onError(t)},function(){o.onCompleted()}))},n)},dr.takeUntilWithTime=function(t,e){Oe(e)||(e=nr);var n=this,r=t instanceof Date?"scheduleWithAbsolute":"scheduleWithRelative";return new wo(function(o){return new Tn(e[r](t,function(){o.onCompleted()}),n.subscribe(o))},n)},dr.throttleFirst=function(t,e){Oe(e)||(e=nr);var n=+t||0;if(0>=n)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new wo(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)},dr.transduce=function(t){function e(t){return{init:function(){return t},step:function(t,e){return t.onNext(e)},result:function(t){return t.onCompleted()}}}var n=this;return new wo(function(r){var o=t(e(r));return n.subscribe(function(t){try{o.step(r,t)}catch(e){r.onError(e)}},r.onError.bind(r),function(){o.result(r)})},n)},dr.exclusive=function(){var t=this;return new wo(function(e){var n=!1,r=!1,o=new In,i=new Tn;return i.add(o),o.setDisposable(t.subscribe(function(t){if(!n){n=!0,Te(t)&&(t=xr(t));var o=new In;i.add(o),o.setDisposable(t.subscribe(e.onNext.bind(e),e.onError.bind(e),function(){i.remove(o),n=!1,r&&1===i.length&&e.onCompleted()}))}},e.onError.bind(e),function(){r=!0,n||1!==i.length||e.onCompleted()})),i},this)},dr.exclusiveMap=function(t,e){var n=this,r=en(t,e,3);return new wo(function(t){var e=0,o=!1,i=!0,s=new In,u=new Tn;return u.add(s),s.setDisposable(n.subscribe(function(n){o||(o=!0,innerSubscription=new In,u.add(innerSubscription),Te(n)&&(n=xr(n)),innerSubscription.setDisposable(n.subscribe(function(o){var i;try{i=r(o,e++,n)}catch(s){return void t.onError(s)}t.onNext(i)},function(e){t.onError(e)},function(){u.remove(innerSubscription),o=!1,i&&1===u.length&&t.onCompleted()})))},function(e){t.onError(e)},function(){i=!0,1!==u.length||o||t.onCompleted()})),u},this)},De.VirtualTimeScheduler=function(t){function e(){return this.toDateTimeOffset(this.clock)}function n(t,e){return this.scheduleAbsoluteWithState(t,this.clock,e)}function r(t,e,n){return this.scheduleRelativeWithState(t,this.toRelative(e),n)}function o(t,e,n){return this.scheduleRelativeWithState(t,this.toRelative(e-this.now()),n)}function i(t,e){return e(),Mn}function s(i,s){this.clock=i,this.comparer=s,this.isEnabled=!1,this.queue=new Rn(1024),t.call(this,e,n,r,o)}On(s,t);var u=s.prototype;return u.add=Je,u.toDateTimeOffset=Je,u.toRelative=Je,u.schedulePeriodicWithState=function(t,e,n){var r=new Gn(this,t,e,n);return r.start()},u.scheduleRelativeWithState=function(t,e,n){var r=this.add(this.clock,e);return this.scheduleAbsoluteWithState(t,r,n)},u.scheduleRelative=function(t,e){return this.scheduleRelativeWithState(e,t,i)},u.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var t=this.getNext();null!==t?(this.comparer(t.dueTime,this.clock)>0&&(this.clock=t.dueTime),t.invoke()):this.isEnabled=!1}while(this.isEnabled)}},u.stop=function(){this.isEnabled=!1},u.advanceTo=function(t){var e=this.comparer(this.clock,t);if(this.comparer(this.clock,t)>0)throw new Qe;if(0!==e&&!this.isEnabled){this.isEnabled=!0;do{var n=this.getNext();null!==n&&this.comparer(n.dueTime,t)<=0?(this.comparer(n.dueTime,this.clock)>0&&(this.clock=n.dueTime),n.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=t}},u.advanceBy=function(t){var e=this.add(this.clock,t),n=this.comparer(this.clock,e);if(n>0)throw new Qe;0!==n&&this.advanceTo(e)},u.sleep=function(t){var e=this.add(this.clock,t);if(this.comparer(this.clock,e)>=0)throw new Qe;this.clock=e},u.getNext=function(){for(;this.queue.length>0;){var t=this.queue.peek();if(!t.isCancelled())return t;this.queue.dequeue()}return null},u.scheduleAbsolute=function(t,e){return this.scheduleAbsoluteWithState(e,t,i)},u.scheduleAbsoluteWithState=function(t,e,n){function r(t,e){return o.queue.remove(i),n(t,e)}var o=this,i=new Qn(this,t,r,e,this.comparer);return this.queue.enqueue(i),i.disposable},s}($n),De.HistoricalScheduler=function(t){function e(e,n){var r=null==e?0:e,o=n||Re;t.call(this,r,o)}On(e,t);var n=e.prototype;return n.add=function(t,e){return t+e},n.toDateTimeOffset=function(t){return new Date(t).getTime()},n.toRelative=function(t){return t},e}(De.VirtualTimeScheduler);var wo=De.AnonymousObservable=function(t){function e(t){return t&&ze(t.dispose)?t:ze(t)?Ln(t):Mn}function n(t,n){var r=n[0],o=n[1],i=b(o)(r);return i!==qn||r.fail(qn.e)?void r.setDisposable(e(i)):m(qn.e)}function r(e,r){function o(t){var r=new yo(t),o=[r,e];return Xn.scheduleRequired()?Xn.scheduleWithState(o,n):n(null,o),r}this.source=r,t.call(this,o)}return On(r,t),r}(gr),yo=function(t){function e(e){t.call(this),this.observer=e,this.m=new In}On(e,t);var n=e.prototype;return n.next=function(t){var e=b(this.observer.onNext).call(this.observer,t);e===qn&&(this.dispose(),m(e.e))},n.error=function(t){var e=b(this.observer.onError).call(this.observer,t);this.dispose(),e===qn&&m(e.e)},n.completed=function(){var t=b(this.observer.onCompleted).call(this.observer);this.dispose(),t===qn&&m(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(vr),go=function(t){function e(t){return this.underlyingObservable.subscribe(t)}function n(n,r,o){t.call(this,e),this.key=n,this.underlyingObservable=o?new wo(function(t){return new Tn(o.getDisposable(),r.subscribe(t))}):r}return On(n,t),n}(gr),Eo=De.Subject=function(t){function n(t){return Fn(this),this.isStopped?this.hasError?(t.onError(this.error),Mn):(t.onCompleted(),Mn):(this.observers.push(t),new so(this,t))}function r(){t.call(this,n),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return On(r,t),kn(r.prototype,lr.prototype,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(Fn(this),!this.isStopped){this.isStopped=!0;for(var t=0,n=e(this.observers),r=n.length;r>t;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(Fn(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var n=0,r=e(this.observers),o=r.length;o>n;n++)r[n].onError(t);this.observers.length=0}},onNext:function(t){if(Fn(this),!this.isStopped)for(var n=0,r=e(this.observers),o=r.length;o>n;n++)r[n].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),r.create=function(t,e){return new Co(t,e)},r}(gr),xo=De.AsyncSubject=function(t){function n(t){return Fn(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),Mn):(this.observers.push(t),new so(this,t))}function r(){t.call(this,n),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return On(r,t),kn(r.prototype,lr,{hasObservers:function(){return Fn(this),this.observers.length>0},onCompleted:function(){var t,n;if(Fn(this),!this.isStopped){this.isStopped=!0;var r=e(this.observers),n=r.length;if(this.hasValue)for(t=0;n>t;t++){var o=r[t];o.onNext(this.value),o.onCompleted()}else for(t=0;n>t;t++)r[t].onCompleted();this.observers.length=0}},onError:function(t){if(Fn(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var n=0,r=e(this.observers),o=r.length;o>n;n++)r[n].onError(t);this.observers.length=0}},onNext:function(t){Fn(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),r}(gr),Co=De.AnonymousSubject=function(t){function e(t){return this.observable.subscribe(t)}function n(n,r){this.observer=n,this.observable=r,t.call(this,e)}return On(n,t),kn(n.prototype,lr.prototype,{onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),n}(gr);De.Pauser=function(t){function e(){t.call(this)}return On(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Eo),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(xe.Rx=De,define(function(){return De})):Ce&&Ne?Se?(Ne.exports=De).Rx=De:Ce.Rx=De:xe.Rx=De;var No=u()}).call(this);